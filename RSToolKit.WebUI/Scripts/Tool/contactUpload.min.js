function CheckStatus(n){upload_criticalError||(xhrS=new XMLHttpRequest,xhrS.open("get",n,!0),xhrS.onload=function(n){var t,i;if(upload_criticalError||upload_finished){$("#uploadProgress").modal("hide");return}t=JSON.parse(n.currentTarget.responseText);t.CriticalFailure?(upload_criticalError=!0,$("#uploadProgress").modal("hide"),alert(t.Message)):t.NeedsRectified?(upload_criticalError=!0,window.location.href=t.RectifyLocation):t.NeedsSheetSelection?(upload_criticalError=!0,window.location.href=t.SheetLocation):t.ProcessingComplete?t.UpdateComplete?(upload_finished=!0,clearInterval(upload_intervalId),$("#uploadProgressBar").css("width","100%"),$("#uploadStatus").html("Completed"),setTimeout(function(){$("#uploadProgress").modal("hide")},3e3)):(i=Math.ceil(t.ProcessingPercent)+"%",upload_updating||($("#uploadStatus").html("Updating Contacts"),upload_updating=!0),$("#uploadProgressBar").css("width",i)):(i=Math.ceil(t.ProcessingPercent)+"%",upload_processing||($("#uploadStatus").html("Processing Data"),upload_processing=!0),$("#uploadProgressBar").css("width",i))},xhrS.onerror=function(){if(upload_criticalError||upload_finished){$("#uploadProgress").modal("hide");return}upload_criticalError=!0;clearInterval(upload_intervalId);$("#uploadProgress").modal("hide");alert("Error Processing Data.")},xhrS.send())}$(document).on("ready",function(){$('form[data-type="xhr"][data-http-method="post"]').on("submit",function(n){$("#uploadContactList").modal("hide");$("#uploadStatus").html("Preparing Upload");$("#uploadProgressBar").css("width","0");$("#uploadProgress").modal("show");n.preventDefault();setTimeout(function(){var t=new FormData(document.getElementById("contactUploadForm")),n=new XMLHttpRequest;n.open("post",$("#contactUploadForm").attr("action"),!0);n.onload=function(){upload_errorCount=0;upload_processing=!1;upload_updating=!1;upload_intervalId="";upload_criticalError=!1;upload_finished=!1;var t=JSON.parse(n.responseText);t.Success?($("#uploadStatus").html("Processing Complete"),$("#uploadProgressBar").css("width","0"),$("#uploadStatus").html("Processing Data"),upload_intervalId=setInterval(function(){CheckStatus(t.PostBack)},500)):($("#uploadProgress").modal("hide"),alert(t.Message))};n.onerror=function(){$("#uploadProgress").modal("hide");alert("Error uploading file.")};n.upload.onprogress=function(n){if(n.lengthComputable){var t=n.loaded/n.total;t==1?$("#uploadStatus").html("Processing File"):$("#uploadStatus").html("Uploading");$("#uploadProgressBar").css("width",Math.ceil(t*100)+"%")}else $("#uploadProgressBar").css("width","100%"),$("#uploadStatus").html("Uploading")};n.send(t)},2e3)})});var upload_errorCount=0,upload_processing=!1,upload_updating=!1,upload_intervalId="",upload_criticalError=!1,upload_finished=!1;
//# sourceMappingURL=contactUpload.min.js.map
