function CheckStatus(n){upload_criticalError||(xhrS=new XMLHttpRequest,xhrS.open("get",n,!0),xhrS.onload=function(n){var t,i;if(upload_criticalError||upload_finished){$("#uploadProgress").modal("hide");return}t=JSON.parse(n.currentTarget.responseText);t.CriticalFailure?(upload_criticalError=!0,$("#uploadProgress").modal("hide"),alert(t.Message)):t.NeedsRectified?(upload_criticalError=!0,window.location.href=t.RectifyLocation):t.NeedsSheetSelection?(upload_criticalError=!0,window.location.href=t.SheetLocation):t.ProcessingComplete?t.UpdateComplete?(upload_finished=!0,clearInterval(upload_intervalId),$("#uploadProgressBar").css("width","100%"),$("#uploadStatus").html("Completed"),setTimeout(function(){window.location.href="../../Cloud/ContactList"},3e3)):(i=Math.ceil(t.ProcessingPercent)+"%",upload_updating||($("#uploadStatus").html("Updating Contacts"),upload_updating=!0),$("#uploadProgressBar").css("width",i)):(i=Math.ceil(t.ProcessingPercent)+"%",upload_processing||($("#uploadStatus").html("Processing Data"),upload_processing=!0),$("#uploadProgressBar").css("width",i))},xhrS.onerror=function(){if(upload_criticalError||upload_finished){$("#uploadProgress").modal("hide");return}upload_criticalError=!0;clearInterval(upload_intervalId);$("#uploadProgress").modal("hide");alert("Error Processing Data.")},xhrS.send())}$(document).on("ready",function(){$('form[data-type="xhr"][data-http-method="put"]').on("submit",function(n){$("#uploadStatus").html("Preparing Upload");$("#uploadProgressBar").css("width","0");$("#uploadProgress").modal("show");n.preventDefault();var i=new FormData(document.getElementById("rectifyForm")),t=new XMLHttpRequest;t.open("put",$("#rectifyForm").attr("action"),!0);t.onload=function(){upload_errorCount=0;upload_processing=!1;upload_updating=!1;upload_intervalId="";upload_criticalError=!1;upload_finished=!1;var n=JSON.parse(t.responseText);n.Success?($("#uploadStatus").html("Processing Complete"),setTimeout(function(){$("#uploadProgressBar").css("width","0");$("#uploadStatus").html("Processing Data");upload_intervalId=setInterval(function(){CheckStatus(n.PostBack)},500)},1e3)):($("#uploadProgress").modal("hide"),alert(n.Message))};t.onerror=function(){$("#uploadProgress").modal("hide");alert("Error rectifying.")};t.send(i)})});var upload_errorCount=0,upload_processing=!1,upload_updating=!1,upload_intervalId="",upload_criticalError=!1,upload_finished=!1;
//# sourceMappingURL=Rectify.min.js.map
