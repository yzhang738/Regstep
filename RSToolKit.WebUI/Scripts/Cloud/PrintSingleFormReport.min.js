function GetData(){processing.showPleaseWait();report.Registrants=[];$.ajax({url:"../../Cloud/SingleFormReportData/"+report.UId+"/"+report.Page+"/"+report.PageSize,type:"get",contentType:"application/json",dataType:"json",success:function(n){var t,u,e,i;if(n.Success){for($.extend(report,n.Data),$("#registrantData").html(""),t={},t.header={},t.data={},t.pageNumber={},t.header.html="",t.header.tr=$("#headers tr"),t.data.tbody=$("#registrantData"),t.data.html="",t.pageNumber.input=$("#pageNumer"),i=0;i<report.Headers.Data.length;i++)t.header.html+="<th>"+report.Headers.Data[i].Header+"<\/th>";for(t.header.tr.html(t.header.html),i=0;i<report.Data.length;i++){for(t.data.html+='<tr id="'+report.Data[i].Id+'"">',u=0;u<report.Headers.Data.length;u++){var f=findData(report.Data[i].Data,report.Headers.Data[u].Id),o=" ",r=report.Headers.Data[u].Id;r!="status"&&r!="audience"&&r!="confirmation"&&r!="dateregistered"&&r!="rsvp"&&r!="type"&&r!="email"&&(o+='class="editable-item cursor-pointer"');e="";f!==null&&(e=f.Id);t.data.html+="<td"+o+' data-id="'+e+'">';f!==null&&(t.data.html+=f.Value);t.data.html+="<\/td>"}t.data.html+="<\/tr>"}if(t.data.tbody.html(t.data.html),t.pageNumber.input.find("option").length==report.TotalPages)for(t.pageNumber.input.html(""),i=0;i<report.TotalPages;i++)t.pageNumber.input.append('<option value="'+(i+1)+'" '+(report.Page==i+1?'selected="true"':"")+">"+(i+1)+"<\/option>");BindEditable()}else alert(n.Message);processing.hidePleaseWait()},error:function(){alert("Server Error");processing.hidePleaseWait()}})}function ReportJson(){this.UId="";this.Page=1;this.PageSize=25;this.Success=!0;this.TotalPages=1;this.Headers=new DataObject;this.Data=[]}function DataObject(){this.Data=[];this.Id=""}function DataSet(){this.Header="";this.Value="";this.Id=""}function findData(n,t){for(var i=0;i<n.length;i++)if(n[i].Id==t)return n[i];return null}function RunBinding(){$('input[data-component-type="datetime"]').datetimepicker({autoclose:!0});$('input[type="hidden"][data-component-type="checkboxgroup"]').each(function(){checkboxgroups[$(this).attr("id")]={parent:$(this),timeExclusion:$(this).parent().attr("data-component-timeexclusion")=="True",Items:[]};$(this).parent().find('input[type="checkbox"]').each(function(){var n=$(this).attr("data-parent");if(checkboxgroups[n].Items.push($(this)),checkboxgroups[n].timeExclusion)$(this).on("change",function(){for(var s,h,r,c,f,i=$(this).attr("data-parent"),e=[],u=[],t=[],o=!1,n=0;n<checkboxgroups[i].Items.length;n++)checkboxgroups[i].Items[n].prop("checked")&&(checkboxgroups[i].Items[n].val()!=$(this).val()&&u.push($(this)),e.push(checkboxgroups[i].Items[n].val()),t.push(checkboxgroups[i].Items[n]));for(n=0;n<t.length;n++)for(s=moment(t[n].attr("data-agenda-start")),h=moment(t[n].attr("data-agenda-end")),r=0;r<t.length;r++)t[n]!=t[r]&&(c=moment(t[r].attr("data-agenda-start")),f=moment(t[r].attr("data-agenda-end")),f.isAfter(s)&&f.isBefore(h)&&(o=!0));if(o){for(n=0;n<checkboxgroups[i].Items.length;n++)checkboxgroups[i].Items[n].prop("checked",!1);for(n=0;n<u.length;n++)u[n].prop("checked",!0);alert("Your selection has time conflictions")}else checkboxgroups[i].parent.val(JSON.stringify(e))});else $(this).on("change",function(){for(var n=$(this).attr("data-parent"),i=[],t=0;t<checkboxgroups[n].Items.length;t++)checkboxgroups[n].Items[t].prop("checked")&&i.push(checkboxgroups[n].Items[t].val());checkboxgroups[n].parent.val(JSON.stringify(i))})})});$('input[type="hidden"][data-component-type="radiogroup"]').each(function(){radiogroups[$(this).attr("id")]={parent:$(this),Items:[]};$(this).parent().find('input[type="radio"]').each(function(){var n=$(this).attr("data-parent");radiogroups[n].Items.push($(this));$(this).on("change",function(){var n=$(this).attr("data-parent");radiogroups[n].parent.val($(this).val())})})});$(".uploaded-image").each(function(){$.ajax({type:"Get",url:"../../Cloud/RegistrantImageThumbnail/"+$(this).attr("data-form-registrant")+"?component="+$(this).attr("data-form-component"),success:function(n){$(this).attr("src",n)}})})}function BindEditable(){$(".editable-item").on("click",function(){oldData.id=$(this).attr("data-id");oldData.regKey=$(this).parent("tr").attr("id");oldData.value=$(this).html();ShowEditableItem(oldData.id,oldData.regKey)})}function ShowEditableItem(n,t){$.ajax({url:"../../Cloud/EditComponent/"+n+"?registrantKey="+t,type:"get",contentType:"application/json",dataType:"json",success:function(n){n.Success?($("#editModal").find(".modal-body").html('<div class="row">'+n.Html+"<\/div>"),RunBinding(),$("#editModal").modal("show")):(oldData.Id=null,oldData.regKey=null,alert(n.Message))},error:function(){oldData.Id=null;oldData.regKey=null;alert("Server Error")}})}var report=new ReportJson,oldData={id:null,regKey:null,value:null},checkboxgroups={},radiogroups={};$(document).ready(function(){report.UId=id;GetData();$("#pageSize").on("blur",function(){var n=$(this);isNaN(n.val())?(alert("You must provide a valid number."),n.val(report.PageSize)):report.PageSize=Math.round(n.val());GetData()});$("#pageNumber").on("change",function(){report.Page=$(this).val();GetData()});$("#formType").on("change",function(){report.ReportType=$(this).val();GetData()});$("#saveEdit").on("click",function(){processing.showPleaseWait();var n={registrantKey:oldData.regKey,value:$('[name="value"]').val()};$.ajax({url:"../../Cloud/EditComponent/"+oldData.id,type:"post",data:JSON.stringify(n),contentType:"application/json",dataType:"json",success:function(n){n.Success?$("#"+oldData.regKey).find('td[data-id="'+oldData.id+'"]').html(n.Value):alert(n.Message);processing.hidePleaseWait()},error:function(){$("#editModal").modal("hide")}})})});
//# sourceMappingURL=PrintSingleFormReport.min.js.map
