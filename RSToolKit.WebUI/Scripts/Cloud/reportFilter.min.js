function ClearFilterFields(){$("#filterEqualities").val("0");$("#filterValue").val("");$("#filterLink").val("0");$("#filterGrouped").attr("checked",!1)}function SetUpFilters(){var n,r;for($("#filterFields").html(""),n=0;n<filters.length;n++)$("#filterFields").append('<option value="'+filters[n].UId+'">'+filters[n].Name+"<\/option>");var u=0,t="",i=!1;for(n=0;n<currentFilters.length;n++){i||(t+='<div class="row"><div class="filter-group col-sm-8 col-sm-offset-2"><span class="filter-group-heading">Group '+ ++u+"<\/span>");t+='<div class="row"><div class="col-sm-10 col-sm-offset-1 filter" data-index="'+n+'"><div class="col-xs-1"><span class="glyphicon glyphicon-filter"><\/span><\/div><div class="col-xs-10"><span class="acting-on">'+currentFilters[n].ActingOn+"<\/span> ";switch(currentFilters[n].Test){case 0:t+=" EQUALS ";break;case 1:t+=" NOT EQUALS ";break;case 2:t+=" GREATER THAN ";break;case 3:t+=" GREATER THAN OR EQUAL TO ";break;case 4:t+=" LESS THAN ";break;case 5:t+=" LESS THAN OR EQUAL TO ";break;case 6:t+=" IN ";break;case 7:t+=" NOT IN ";break;case 8:t+=" STARTS WITH ";break;case 9:t+=" CONTAINS ";break;case 10:t+=" ENDS WITH "}t+=currentFilters[n].Value;currentFilters[n].Link==0&&n<currentFilters.length-1&&(currentFilters[n].Link=1);switch(currentFilters[n].Link){case 1:t+=" AND";break;case 2:t+=" OR"}t+="<\/div><\/div><\/div>";currentFilters[n].GroupNext?i=!0:(t+="<\/div><\/div>",i=!1)}for((currentFilters.length<1||currentFilters[currentFilters.length-1].GroupNext)&&(t+="<\/div><\/div>"),currentFilters.length==0&&(grouptHtml=""),$("#activeFilters").html(t),n=0;n<currentFilters.length;n++)r=n,$.ajax({url:"../FormBuilder/GetVariableName",type:"post",data:JSON.stringify({company:CurrentCompany,form:filterTable,variable:currentFilters[n].ActingOn}),dataType:"json",traditional:"true",contentType:"application/json; charset=utf-8",success:function(n){if(n.Success){var t=$('div.filter[data-index="'+r+'"]').find(".acting-on");t.html(n.Name)}}});$(".filter").on("click",function(){EditFilter(parseInt($(this).attr("data-index")))})}function EditFilter(n){$("#filterFields").val(currentFilters[n].ActingOn);$("#filterEqualities").val(currentFilters[n].Test);$("#filterValue").val(currentFilters[n].Value);$("#filterLink").val(currentFilters[n].Link);$("#filterGrouped").prop("checked",currentFilters[n].GroupNext);$("#updateFilter").show();$("#addFilter").hide();updateFilterIndex=n}function compareFilter(n,t){return n.Priority-t.Priority}var filters=[],currentFilters=[],availableFilters=[],updateFilterIndex=-1,currentTableUId,filterTable="";$(document).ready(function(){$("#addFilter").on("click",function(){var n=$("#filterFields > option:selected").val(),t=parseInt($("#filterEqualities > option:selected").val()),i=$("#filterValue").val(),r=parseInt($("#filterLink > option:selected").val()),u=$("#filterGrouped").is(":checked");currentFilters.push({ActingOn:n,Test:t,Value:i,Link:r,GroupNext:u,Priority:currentFilters.nextPriority()});SetUpFilters();ClearFilterFields()});$("#updateFilter").hide();$("#updateFilter").on("click",function(){$("#updateFilter").hide();$("#addFilter").show();var n=$("#filterFields > option:selected").val(),t=parseInt($("#filterEqualities > option:selected").val()),i=$("#filterValue").val(),r=parseInt($("#filterLink > option:selected").val()),u=$("#filterGrouped").is(":checked");currentFilters[updateFilterIndex].ActingOn=n;currentFilters[updateFilterIndex].Test=t;currentFilters[updateFilterIndex].Value=i;currentFilters[updateFilterIndex].Link=r;currentFilters[updateFilterIndex].GroupNext=u;SetUpFilters();ClearFilterFields()});$("#clearFilters").on("click",function(){while(currentFilters.length>0)currentFilters.pop();SetUpFilters()})});currentFilters.find=function(n){for(var t=0;t<this.length;t++)if(this[t].ActingOn==n)return t;return-1};currentFilters.nextPriority=function(){return this.length==0?1:(this.sort(compareFilter),this.checkPriorities(),this[this.length-1].Priority+1)};currentFilters.checkPriorities=function(){for(var t=0,n=0;n<this.length;n++)t==this[n].Priority?this[n].Priority=++t:t=this[n].Priority};
//# sourceMappingURL=reportFilter.min.js.map
