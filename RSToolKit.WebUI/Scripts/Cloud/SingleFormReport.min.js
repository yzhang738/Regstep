function DeleteStatement(n,t){t.preventDefault();$(n).remove();$(".filter").css("background-color","inherit");$(".filter").find('input[name$="GroupNext"]').val("false");colorIndex=-1;$("tr.filter").each(function(n){filterIndex=n;$(this).find("input").each(function(){var n=$(this).attr("name");typeof n!="undefined"&&(n=n.replace(/\[\d+\]/,"["+filterIndex+"]"),$(this).attr("name",n))});$(this).find('input[name$="Order"]').val(filterIndex+1)})}function DeleteVariable(n,t){t.preventDefault();n.remove();variableIndex=-1;$('#sortOn option[value="'+n.attr("data-id")+'"]').remove();$(".variable").each(function(){variableIndex++;$(this).find("input").attr("name","Variables["+variableIndex+"]")})}function ActingOnChange(n,t){n.find(".filter-value").replaceWith(GenerateValueSelection(t.val(),parseInt(n.attr("data-index"))));$(".datepicker").datetimepicker({autoclose:!0})}function GenerateValueSelection(n,t,i){var u,f,e,o,r;(typeof i=="undefined"||i===null)&&(i="");component=findComponent(n);type=n;component!==null&&(type=component.Type);u="";switch(type){case"audience":for(u+='<select class="filter-value form-control" name="Filters['+t+'].Value">',r=0;r<audiences.length;r++)u+='<option value="'+audiences[r].UId+'"'+(i==audiences[r].UId?'selected="true"':"")+">"+audiences[r].Name+"<\/option>";u+="<\/select>";break;case"type":for(u+='<select class="form-control filter-value" class="filter-value form-control" name="Filters['+t+'].Value">',r=0;r<types.length;r++)u+='<option value="'+types[r].Index+'"'+(i==types[r].Index?'selected="true"':"")+">"+types[r].Name+"<\/option>";u+="<\/select>";break;case"status":for(u+='<select class="filter-value form-control" name="Filters['+t+'].Value">',r=0;r<statusi.length;r++)u+='<option value="'+statusi[r].Index+'"'+(i==statusi[r].Index?'selected="true"':"")+">"+statusi[r].Name+"<\/option>";u+="<\/select>";break;case"rsvp":u+='<select class="filter-value form-control" name="Filters['+t+'].Value">';u+='<option value="true" '+(i=="true"?'selected="true"':"")+">Accepted<\/option>";u+='<option value="false" '+(i=="false"?'selected="true"':"")+">Declined<\/option>";u+="<\/select>";break;case"dateregistered":u+='<input class="filter-value datepicker form-control" name="Filters['+t+'].Value" value="" />';break;case"checkboxgroup":for(f=component.Items,u+='<select class="filter-value form-control" name="Filters['+t+'].Value">',r=0;r<f.length;r++)u+='<option value="'+f[r].UId+'" '+(i==f[r].UId?'selected="true"':"")+">"+f[r].Name+"<\/option>";u+="<\/select>";break;case"radiogroup":for(e=component.Items,u+='<select class="filter-value form-control" name="Filters['+t+'].Value">',r=0;r<e.length;r++)u+='<option value="'+e[r].UId+'" '+(i==e[r].UId?'selected="true"':"")+">"+e[r].Name+"<\/option>";u+="<\/select>";break;case"dropdowngroup":for(o=component.Items,u+='<select class="filter-value form-control" name="Filters['+t+'].Value">',r=0;r<o.length;r++)u+='<option value="'+o[r].UId+'" '+(i==o[r].UId?'selected="true"':"")+">"+o[r].Name+"<\/option>";u+="<\/select>";break;default:u+='<input type="text" class="filter-value form-control" name="Filters['+t+'].Value" value="'+i+'" />'}return u}function findComponent(n){for(var t=0;t<components.length;t++)if(components[t].UId==n)return components[t];return null}$(document).ready(function(){$("#headers").sortable({containerSelector:"table",itemPath:"> tbody",itemSelector:"tr",handle:"span.icon-move",placeholder:'<tr class="placeholder"/>',onDrop:function(n,t,i){i(n);$("#headers").find("input").each(function(n){$(this).attr("name","Variables["+n+"]")})}});$(".filter-actionon").on("change",function(){var n=parseInt($(this).parents("tr").attr("data-index"));ActingOnChange($('tr[data-index="'+n+'"]'),$(this))});$("#addHeader").on("click",function(n){var t,i;if(n.preventDefault(),t={},t.UId=$("#header").val(),t.Name=$("#header option:selected").text(),!($('.variable[data-id="'+t.UId+'"]').length>0)){variableIndex++;$("#headers").append('<tr><td class="variable" data-id="'+t.UId+'"><span class="glyphicon glyphicon-move icon-move"><\/span> '+t.Name+'<input type="hidden" name="Variables['+variableIndex+']" value="'+t.UId+'" /><\/td><td><a href="#" class="delete-variable"><span class="glyphicon glyphicon-trash"><\/span><\/a><\/td><\/tr>');i=$('.variable[data-id="'+t.UId+'"]').parent();$("#sortOn").append('<option value="'+t.UId+'">'+t.Name+"<\/option>");i.find(".delete-variable").on("click",function(n){DeleteVariable($(this).parent().parent(),n)})}});$(".delete-variable").on("click",function(n){DeleteVariable($(this).parent().parent(),n)});$("#ungroup").on("click",function(n){n.preventDefault();$(".filter").css("background-color","inherit");$(".filter").find('input[name$="GroupNext"]').val("false");colorIndex=-1});$("#groupTogether").on("click",function(n){if(n.preventDefault(),$("input.groupNext:checked").length>1)colorIndex++;else return;colorIndex>=colors.length&&(colorIndex=0);var r=!1,u=!1,t=null,f=0,i=[];$("input.groupNext").each(function(){if(r&&($(this).is(":checked")||(u=!0)),$(this).is(":checked")&&!u){var n=$(this).parent().parent().parent();f++;r=!0;t=n.find('input[name$="GroupNext"]');t.val("true");n.css("background-color",colors[colorIndex]);i.push(n)}});f==1&&(i[0].css("background-color","inherit"),i[o].find("input.groupNext").val("false"));t.val("false");$("input.groupNext").prop("checked",!1)});$(".delete-statement").on("click",function(n){DeleteStatement($(this).parents("tr")[0],n)});$("#addStatement").on("click",function(){var t;filterIndex++;var r=new Filter,i=filterIndex+1,n='<tr class="filter" data-index="'+filterIndex+'"><td>';for(n+='<label><input type="checkbox" class="groupNext" value="true" /><\/label> <a href="#" class="delete-statement"><span class="glyphicon glyphicon-trash"><\/span><\/a>',n+='<input type="hidden" name="Filters['+filterIndex+'].GroupNext" value="false" />',n+='<input type="hidden" name="Filters['+filterIndex+'].UId" value="'+emptyGuid+'" />',n+='<input type="hidden" name="Filters['+filterIndex+'].Order" value="'+i+'" />',n+="<\/td>",n+='<td><select class="filter-link form-control" name="Filters['+filterIndex+'].Link">',n+='<option value="0">None<\/option>',n+='<option value="1">And<\/option>',n+='<option value="2">Or<\/option>',n+="<\/select><\/td>",n+='<td><select class="filter-actionon form-control" name="Filters['+filterIndex+'].ActingOn">',n+='<option value="email">Email<\/option>',n+='<option value="confirmation">Confirmation<\/option>',n+='<option value="status">Status<\/option>',n+='<option value="dateregistered">Date Registered<\/option>',n+='<option value="type">Type<\/option>',n+='<option value="audience">Audience<\/option>',n+='<option value="rsvp">RSVP<\/option>',t=0;t<components.length;t++)n+='<option value="'+components[t].UId+'">'+components[t].Name+"<\/option>";for(n+="<\/select><\/td>",n+='<td><select class="filter-test form-control" name="Filters['+filterIndex+'].Test">',t=0;t<tests.length;t++)n+='<option value="'+tests[t].Index+'">'+tests[t].Name+"<\/option>";n+="<\/select><\/td>";n+="<td>";n+=GenerateValueSelection("default",filterIndex,"");n+="<\/td>";n+="<\/tr>";$("#filterTable").children("tbody").append(n);$('.filter[data-index="'+filterIndex+'"]').find(".filter-actionon").on("change",function(){var n=parseInt($(this).parents("tr").attr("data-index"));ActingOnChange($('tr[data-index="'+n+'"]'),$(this))});$('.filter[data-index="'+filterIndex+'"]').find(".delete-statement").on("click",function(n){DeleteStatement($(this).parents("tr")[0],n)})})});var Filter=function(){this.Link=0;this.GroupNext=!1;this.Order=-1;this.Test=0;this.ActingOn="";this.Value="";this.SortingId=-1;this.UId=""},Link=function(){this.None=0;this.And=1;this.Or=2},LinkString=["None","And","Or"],Test=function(){this.Equal=0;this.GreaterThan=1;this.GreaterThanOrEqual=2;this.LessThan=3;this.LessThanOrEqual=4;this.NotEqual=5;this.StartsWith=6;this.NotStartsWith=7;this.EndsWith=8;this.NotEndsWith=9;this.Contains=10;this.DoesNotContain=11;this.RegexMatch=12;this.RegexNotMatch=13;this.In=14;this.NotIn=15},TestString=["Equal","GreaterThan","GreaterThanOrEqual","LessThan","LessThanOrEqual","NotEqual","StartsWith","NotStartsWith","EndsWith","NotEndsWith","Contains","DoesNotContain","RegexMatch","RegexNotMatch","In","NotIn"],emptyGuid="00000000-0000-0000-0000-000000000000";
//# sourceMappingURL=SingleFormReport.min.js.map
