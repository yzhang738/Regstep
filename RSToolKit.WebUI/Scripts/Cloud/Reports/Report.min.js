/*! Report 2.0.1.1 */
var FORMREPORT={};$(document).on("ready",function(){"use strict";function w(t){(typeof t=="undefined"||t===null)&&(t=!1);$("#m_save_files").html("Loading Files");prettyProcessing.showPleaseWait("Retrieving Report","Please Wait");var i=new XMLHttpRequest;i.open("get",window.location.origin+"/Cloud/Reports/"+n.Id);RESTFUL.ajaxHeader(i);i.onerror=function(n){prettyProcessing.hidePleaseWait();RESTFUL.xhrError(n)};i.onload=function(n){var e=n.currentTarget,i,u,r,f;if(e.status===200)if(i=RESTFUL.parse(e),i.Success){for(prettyProcessing.hidePleaseWait(),u=$("#m_save_files"),u.html(""),r=0;r<i.Files.length;r++)f=i.Files[r],u.append('<div class="report-file" data-id="'+f.Id+'">'+f.Name+"<\/div>");if(t){$(".report-file").on("click",function(){k($(this).attr("data-id"));$("m_save").modal("hide")});$("#m_save_fileInput").parent().hide()}else{$(".report-file").on("click",function(){$("#m_save_fileInputId").val($(this).attr("data-id"));$("#m_save_fileInput").val($(this).html())});$("#m_save_fileInput").parent().show()}$("#m_save").modal("show")}else prettyProcessing.hidePleaseWait(),RESTFUL.showError();else prettyProcessing.hidePleaseWait(),RESTFUL.showError()};i.send()}function k(t){$("#m_save").modal("hide");n.Load(window.location.origin+"/Cloud/Report",{id:t})}function d(){$(".form-component").removeClass("col-sm-6").removeClass("col-md-4").removeClass("col-lg-3").addClass("col-sm-12");$('input[data-component-type="datetime"]').datetimepicker();$('input[type="hidden"][data-component-type="checkboxgroup"]').each(function(){var t=$(this),n=t.val(),i;(typeof n=="undefined"||n==="")&&(n="[]");i=JSON.parse(n);t.data("value",i)});$('input[type="checkbox"]').on("change",function(){var t=$(this),i,n,e,o,s,r,u,v,f,h;if(!/Waitlistings/i.test(t.attr("name"))){if(i=$("#"+t.attr("data-parent")),n=i.data("value"),t.prop("checked")){if(e=!0,o=n.indexOf(t.val()),o===-1&&n.push(t.val()),i.attr("data-component-timeexclusion")==="True"){for(s=!1,r=0;r<n.length;r++){var c=$("#"+n[r]),l=moment(c.attr("data-agenda-start")),a=moment(c.attr("data-agenda-end"));for(u=0;u<n.length;u++)n[r]!==n[u]&&(v=$("#"+n[u]),f=moment(v.attr("data-agenda-end")),(f.isAfter(l)||f.isSame(l))&&(f.isBefore(a)||f.isSame(a))&&(s=!0))}s&&(e=!1)}e||(n.splice(o,1),t.prop("checked",!1),alert("Your selection has time conflictions."))}else h=n.indexOf(t.val()),h!==-1&&n.splice(h,1);i.data("value",n);i.val(JSON.stringify(n))}});$('input[data-component-type="radiogroup"][type="hidden"]').each(function(){});$('input[type="radio"]').on("change",function(){var n=$(this),t=$("#"+n.attr("data-parent"));n.prop("checked")&&t.val(n.val())});$(".uploaded-image").each(function(){$.ajax({type:"Get",url:"../../Cloud/RegistrantImageThumbnail/"+$(this).attr("data-form-registrant")+"?component="+$(this).attr("data-form-component"),success:function(n){$(this).attr("src",n)}})})}function g(){$(".editable-item").on("click",function(){$("#editModal .modal-body").find("#editingProgress").show();$("#editModal .modal-body").find("#editingData").hide();$("#editModal").modal("show");i.id=$(this).attr("data-headerid");i.regKey=$(this).parent("tr").attr("id");i.value=$(this).html();$(this).hasClass("file")?setTimeout(function(){b(i.id,i.regKey)},1e3):b(i.id,i.regKey)});$('a[href="#emailSend"]').on("click",function(n){n.preventDefault();var t=$(this).attr("data-emailsend-id");EmailSendInformation.load(t)})}function b(n,t){var r=$("#editModal .modal-dialog").width()-62;$.ajax({url:"../../Cloud/EditComponent?key="+n+"&registrantKey="+t+"&width="+r,type:"get",contentType:"application/json",dataType:"json",success:function(n){n.Success?($("#editModal").find("#editingData").html(n.Html),$("#editModal").find(".editingData").show("fast"),$("#editModal").find("#editingProgress").hide("fast"),d()):($("#editModal").modal("hide"),i.Id=null,i.regKey=null,alert(n.Message))},error:function(){prettyProcessing.hidePleaseWait();i.Id=null;i.regKey=null;alert("Server Error")}})}function a(n){for(var r,t,u={id:n.Id,savedId:n.SavedId,options:n.Options,items:[],lastFullCheck:n.LastFullCheck.format()},i=0;i<n.Rows.length;i++)r=FindColumn(n.Rows[i],"modificationToken"),r!==null&&u.items.push({id:n.Rows[i].Id,token:r.Value});t=new XMLHttpRequest;t.open("post",window.location.origin+"/Cloud/ReportUpdate",!0);t.onload=function(t){var o=t.currentTarget,i,r,u,f,e,s;if(o.status===200)if(i=RESTFUL.parse(o),i.action==="expired")n.DeleteStore(n),n.Load(window.location.origin+"/Cloud/Report",TABLE_options);else{if(r=!1,/rows/.test(i.action))for(u=0;u<i.rows.length;u++)f=i.rows[u],r=r||!ReplaceRow(n,f),n.UpdateRow(n,f),n.OnGetComplete(n,$("#"+f.Id));if(/headers/.test(i.action)){for(e=0;e<i.headers.length;e++)s=i.headers[e],ReplaceHeader(n,s);n.GetPage()}r&&n.FilteredRecords()<n.RecordsPerPage&&(n.Filter(),n.GetPage())}setTimeout(function(){a(n)},3e4)};RESTFUL.ajaxHeader(t);RESTFUL.jsonHeader(t);t.send(JSON.stringify(AddJsonAntiForgeryToken(u)))}function v(n){if(BREADCRUMB.CURRENT===null){setTimeout(function(){v(n)},5e3);return}BREADCRUMB.CURRENT.Label=n.Name+" on "+n.Parent;BREADCRUMB.CURRENT.Parameters.id=n.SavedId!==null&&typeof n.SavedId!="undefined"?n.SavedId:n.Id;UpdateCrumb(BREADCRUMB.CURRENT)}function e(){var n=new XMLHttpRequest;n.open("get",window.location.origin+"/Cloud/Registrant/"+t.id,!0);RESTFUL.ajaxHeader(n);RESTFUL.jsonHeader(n);n.onload=function(n){var v=n.currentTarget,s,l,u,f,h,r,p,c;if(v.status===200){for(t=RESTFUL.parse(v),$(".registrant-cancelled").hide(),$(".registrant-submitted").hide(),$(".registrant-deleted").hide(),$(".registrant-incomplete").hide(),$(".registrant-notincomplete").show(),$(".registrant-notcancelled").show(),$(".registrant-notdeleted").show(),$(".registrant-notsubmitted").show(),$(".registrant-name").html(t.fullName),$(".registrant-confirmation").children("td").eq(1).html(t.confirmation),$(".registrant-editedBy").children("td").eq(1).html(t.editedBy),s="",l=0;l<t.seatings.length;l++)u=t.seatings[l],s+='<div class="row">',s+=u.seated?'<div class="col-xs-4">'+u.component+'<\/div><div class="col-xs-4">Seated<\/div><div class="col-xs-4">'+u.dateSeated+"<\/div>":'<div class="col-xs-4">'+u.component+'<\/div><div class="col-xs-4">Waitlisted<\/div><div class="col-xs-4">'+u.date+"<\/div>",s+='<div class="row">';for($(".registrant-seatings").children("td").eq(0).html(s),t.rsvp==null?$(".registrant-rsvp").hide():($(".registrant-rsvp").show(),$(".registrant-rsvp").children("td").eq(1).html(t.rsvp)),t.status===0?($(".registrant-notincomplete").hide(),$(".registrant-incomplete").show()):t.status===1?($(".registrant-notsubmitted").hide(),$(".registrant-submitted").show()):t.status>1&&t.status<5?($(".registrant-notcancelled").hide(),$(".registrant-cancelled").show()):t.status===5&&($(".registrant-notdeleted").hide(),$(".registrant-deleted").show()),t.phone!==null?($(".registrant-phone").children("td").eq(1).html(t.phone),$(".registrant-phone").show()):$(".registrant-phone").hide(),t.email!==null?($(".registrant-email").children("td").eq(1).html(t.email),$(".registrant-email").show()):$(".registrant-email").hide(),t.audience!==null?($(".registrant-audience").children("td").eq(1).html(t.audience),$(".registrant-audience").show()):$(".registrant-audience").hide(),$(".registrant-balance").children("td").eq(1).html(t.balance),$(".registrant-balanceNow").html(t.balance),t.dateCreated!==null?($(".registrant-datecreated").children("td").eq(1).html(t.dateCreated),$(".registrant-datecreated").show()):$(".registrant-datecreated").hide(),t.dateModified!==null?($(".registrant-datemodified").children("td").eq(1).html(t.dateModified),$(".registrant-datemodified").show()):$(".registrant-datemodified").hide(),t.statusLabel!==null?($(".registrant-status").children("td").eq(1).html(t.statusLabel),$(".registrant-status").show()):$(".registrant-status").hide(),$(".registrant-transactions").html(""),f="",h=0;h<t.finances.length;h++){var i=t.finances[h],w=new moment(t.finances[h].date),a="<tr><td>"+w.format()+"<\/td>";a+="<td>"+i.label+(i.voidable&&!i.voided?' <a class="text-rsred finance-void" href="'+window.location.origin+"/cloud/voidadjustment?aid="+i.id+'" data-id="'+i.id+'">[void]<\/a>':"")+"<\/td>";a+='<td style="text-align: right;">'+(i.failed||i.voided?"<s>":"")+i.amount+(i.failed||i.voided?"<\/s>":"")+"<\/td><\/tr>";f+=a}$(".registrant-transactions").html(f);$(".finance-void").on("click",function(n){n.preventDefault();var t=new XMLHttpRequest;t.open("post",$(this).attr("href"),!0);t.onload=function(n){var t=RESTFUL.parse(n.currentTarget);t.Success?e():alert("Failed to void adjustment.")};t.send(JSON.stringify({aid:$(this).attr("data-id")}))});for(f="",r=0;r<t.emailActivities.length;r++)p=new moment(t.emailActivities[r].date),c="<tr><td>"+p.format()+"<\/td>",c+='<td><a href="#" class="registrant-emailSendInformation" data-id="'+t.emailActivities[r].id+'">'+t.emailActivities[r].name+"<\/a><\/td>",c+="<td>"+t.emailActivities[r].deepestEvent+"<\/td>",c+="<tr>",f+=c;$(".registrant-emailactivity").html(f);$(".registrant-confirmationLink").html(window.location.origin+"/Register/ShowConfirmation/"+t.id);$(".registrant-continueLink").html(window.location.origin+"/Register/ContinueRegistration/"+t.id);$(".registrant-link-continueLink").attr("href",window.location.origin+"/AdminRegister/Start?formKey="+t.formKey+"&email="+t.email);$(".registrant-link-confirmationLink").attr("href",window.location.origin+"/AdminRegister/Confirmation?registrantKey="+t.id+"&changeStatus=false");$(".registrant-transaction").on("click",function(n){n.preventDefault();y($(this).attr("id"))});EmailSendInformation.bind(".registrant-emailSendInformation");$(".registrant-addOptions").each(function(){var n=$(this).attr("data-xhr-options-template");typeof n!="undefined"&&(n=n.replace(/_UId_/i,t.id),$(this).attr("data-xhr-options",n))});$(".registrant-changeSet").on("click",function(n){n.preventDefault();$("#registrant-changeSetTable").html("");o=new JTable("#registrant-changeSetTable",!0);o.OnGetComplete=function(){$(o.Table).find("tbody").find("tr").not(":first").children("td").each(function(){var t=$(this),n=t.attr("data-headerid");n!=="email"&&n!=="audience"&&n!=="confirmation"&&n!=="lastmodified"&&n!=="modifiedby"&&(t.addClass("oldData-copy"),t.append('<div><a class="copyData-old" href="'+window.location.origin+'/Cloud/RegistrantCopyOldData" data-xhr-modalKeep="true" data-xhr-oncomplete="nothing" data-xhr-method="put" data-xhr-options=\'{"id":"'+t.attr("id")+"\"}'>USE FOR CURRENT<\/a><\/div>"))});$(".copyData-old").on("click",function(n){var i,r,u,t;prettyProcessing.showPleaseWait();n.preventDefault();i=$(this);r={};typeof i.attr("data-xhr-options")!="undefined"&&(r=JSON.parse(i.attr("data-xhr-options")));u=i.attr("href");t=new XMLHttpRequest;t.open("put",u,!0);RESTFUL.ajaxHeader(t);t.setRequestHeader("Content-Type","application/json");t.onload=function(n){var t,i,r;n.currentTarget.status===200?(t=RESTFUL.parse(n.currentTarget),t.Success?(i=$(t_table.Table).find('[id="'+t.Id+'"]'),i.html(t.Value)):(r=t.Message,RESTFUL.showError(r,"Error Message"))):n.currentTarget.status===400?RESTFUL.showError(n.currentTarget.responseBody,"Bad Request"):RESTFUL.showError("Server Error","Error Message");prettyProcessing.hidePleaseWait()};t.onerror=function(){prettyProcessing.hidePleaseWait();RESTFUL.showError("Server Error","Error Message")};t.send(JSON.stringify(r))})};o.Load(window.location.origin+"/Cloud/RegistrantChangeSet",{id:t.id});$("#m_registrant-changeset").modal("show")});$("#m_registrant").modal("show")}else RESTFUL.showError("Server Error");prettyProcessing.hidePleaseWait()};prettyProcessing.showPleaseWait();n.send()}function y(n){typeof n!="undefined"&&n!==null&&(p=n);prettyProcessing.showPleaseWait();var t=new XMLHttpRequest;$("#transaction-id").val(n);t.open("get",window.location.origin+"/Cloud/Transaction/"+p,!0);RESTFUL.ajaxHeader(t);RESTFUL.jsonHeader(t);t.onload=function(n){var o=n.currentTarget,e,t,u,s,r,i,h,f,c;if(o.status===200)if(e=RESTFUL.parse(o),e.Success){for(t=e.Data,u=$("#m_transaction"),u.find(".transaction-addOptions").each(function(){var n=$(this),i=n.attr("data-xhr-options");typeof i!="undefined"&&n.attr("data-xhr-options",i.replace(/_UId_/,t.id))}),u.find(".transaction-refundBalance").attr("data-id",t.id),s=new moment(t.date),u.find(".transaction-date").html(s.format()),u.find(".transaction-amount").html(t.amount),u.find(".transaction-type").html(t.type),u.find(".transaction-lastfour").html(t.lastFour),u.find(".transaction-status").html(t.status),u.find(".transaction-totalamount").html(t.prettyBalance),r="",i=0;i<t.details.length;i++)for(h=new moment(t.details[i].date),r+="<tr><td>"+h.format()+"<\/td>",r+="<td>"+t.details[i].type+"<\/td>",r+="<td>"+t.details[i].id+"<\/td>",r+="<td>"+t.details[i].status+"<\/td>",r+="<td>"+(t.details[i].failed?"<s>":"")+t.details[i].amount+(t.details[i].failed?"<\/s>":"")+"<\/td><\/tr>",f=0;f<t.details[i].credits.length;f++)c=new moment(t.details[i].credits[f].date),r+="<tr><td>&nbsp;&nbsp;"+c.format()+"<\/td>",r+="<td>"+t.details[i].credits[f].type+"<\/td>",r+="<td>"+t.details[i].credits[f].id+"<\/td>",r+="<td>"+t.details[i].credits[f].status+"<\/td>",r+="<td>"+(t.details[i].credits[f].failed?"<s>":"")+t.details[i].credits[f].amount+(t.details[i].credits[f].failed?"<\/s>":"")+"<\/td><\/tr>";u.find(".transaction-details").html(r);prettyProcessing.hidePleaseWait();t.balance>0?$(".transaction.hasBalance").hide():$(".transaction.hasBalance").show();$("#m_transaction").modal("show")}else $("#transaction-id").val(""),prettyProcessing.hidePleaseWait(),RESTFUL.showError(e.Message);else $("#transaction-id").val(""),prettyProcessing.hidePleaseWait(),alert("Server error")};t.send()}var n=new JTable("#jTable"),l,r,s,h,c,u;FORMREPORT.VERSION="2.0.1.1";l=$(window).innerHeight();l*=.72;$(".modal-fill .modal-body").css("max-height",l+"px");$(window).on("resize",function(){var n=$(window).innerHeight();n*=.72;$(".modal-fill .modal-body").css("max-height",n+"px")});var t={},o=null,p=0,i={id:null,regKey:null,value:null,isSecure:!1},f=new JTableFilter;f.ActingOn="status";f.Value="1";f.Test="==";r=new JTableFilter;r.ActingOn="status";r.Value="0";r.Test="!=";s=new JTableFilter;s.ActingOn="status";s.Value="2";s.Test="!=";h=new JTableFilter;h.ActingOn="status";h.Value="3";h.Test="!=";c=new JTableFilter;c.ActingOn="status";c.Value="4";c.Test="!=";u=new JTableFilter;u.ActingOn="status";u.Value="5";u.Test="!=";$("#checkForUpdates").on("click",function(){a(n)});$("#getFull").on("click",function(){n.Load(window.location.origin+"/Cloud/Report",TABLE_options)});$("#downloadReport").on("click",function(){var t=new XMLHttpRequest;t.open("post",window.location.origin+"/Cloud/Create/Report");RESTFUL.jsonHeader(t);RESTFUL.ajaxHeader(t);t.onerror=function(){RESTFUL.showError("There was an error creating the report. 500 Internal server error.","Report Creation Error");prettyProcessing.hidePleaseWait()};t.onload=function(n){var i=n.currentTarget,t;i.status===200?(t=RESTFUL.parse(i),t.Success?(prettyProcessing.hidePleaseWait(),window.location=window.location.origin+"/Cloud/Download/Report/"+t.Id):(RESTFUL.showError("There was an error creating the report.","Report Creation Error"),prettyProcessing.hidePleaseWait())):(RESTFUL.showError("There was an error creating the report.","Report Creation Error"),prettyProcessing.hidePleaseWait())};prettyProcessing.showPleaseWait("Creating Form Report","Creating Report");t.send(JSON.stringify(AddJsonAntiForgeryToken(n.GetAjaxData())))});$("#printable").on("click",function(t){t.preventDefault();n.GetPrintView()});$("#m_save_button").on("click",function(){var u,i,t,r;($("#m_save").modal("hide"),u=$("#m_save_fileInputId").val(),i=$("#m_save_fileInput").val(),$("#m_save_fileInputId").val(""),$("#m_save_fileInput").val(""),typeof i!="undefined"&&i!==null&&i!=="")&&(prettyProcessing.showPleaseWait("Saving Report","Please Wait",100),t=new XMLHttpRequest,t.open("put",window.location.origin+"/Cloud/Report"),RESTFUL.jsonHeader(t),t.onerror=function(n){prettyProcessing.hidePleaseWait();RESTFUL.xhrError(n)},t.onload=function(t){var r=t.currentTarget,i;r.status===200?(i=RESTFUL.parse(r),i.Success?($("#file_save").removeAttr("style"),$("#file_delete").removeAttr("style"),n.SavedId=i.Id,n.Name=i.Name,$(".jTable").html(n.Name),$("#file_delete").attr("data-xhr-options",'{"id":"'+n.SavedId+'"}'),BREADCRUMB.CURRENT.Label="Report: "+n.Name+" on "+n.Parent,BREADCRUMB.CURRENT.Parameters.id=n.SavedId,UpdateCrumb(BREADCRUMB.CURRENT),$(".jTable_standardOnly").hide(),n.GetPage(),prettyProcessing.hidePleaseWait()):(prettyProcessing.hidePleaseWait(),RESTFUL.showError())):(prettyProcessing.hidePleaseWait(),RESTFUL.showError())},r=n.GetAjaxData(),r.SavedId=u,r.Name=i,t.send(JSON.stringify(AddJsonAntiForgeryToken(r))))});$("#file_saveas").on("click",function(){w()});$("#file_save").on("click",function(t){var i,r;(t.preventDefault(),typeof n.SavedId!="undefined"&&n.SavedId!==null)&&(prettyProcessing.showPleaseWait("Saving Report","Please Wait",100),i=new XMLHttpRequest,i.open("put",window.location.origin+"/Cloud/Report"),RESTFUL.jsonHeader(i),i.onerror=function(n){prettyProcessing.hidePleaseWait();RESTFUL.xhrError(n)},i.onload=function(t){var r=t.currentTarget,i;r.status===200?(i=RESTFUL.parse(r),i.Success?($("#file_save").removeAttr("style"),$("#file_delete").removeAttr("style"),n.SavedId=i.Id,n.Name=i.Name,prettyProcessing.hidePleaseWait()):(prettyProcessing.hidePleaseWait(),RESTFUL.showError())):(prettyProcessing.hidePleaseWait(),RESTFUL.showError())},r=n.GetAjaxData(),i.send(JSON.stringify(AddJsonAntiForgeryToken(r))))});$("#file_load").on("click",function(){w(!0)});$("#file_permissions").on("click",function(t){(t.preventDefault(),typeof n.SavedId!="undefined"&&n.SavedId!==null)&&(window.location=window.location.origin+"/Security/Permissions/"+n.SavedId)});$("#formType").on("change",function(){var t,i,e,s,h,o,c,l,a,v;n.Filters=[];switch($(this).val()){case"all":n.Name="All Registrations";break;case"active":n.Name="Active Registrations";n.Filters.push(f);break;case"canceled":n.Name="Cancelled Registrations";t=new JTableFilter;t.GroupNext=!0;t.ActingOn="status";t.Order=1;t.Test="==";t.Link="or";t.Value="2";i=new JTableFilter;i.GroupNext=!0;i.ActingOn="status";i.Order=3;i.Test="==";i.Link="or";i.Value="3";e=new JTableFilter;e.GroupNext=!1;e.ActingOn="status";e.Order=4;e.Test="==";e.Link="or";e.Value="4";n.Filters.push(t);n.Filters.push(i);n.Filters.push(e);break;case"incompletes":n.Name="Incomplete Registrations";s=new JTableFilter;s.ActingOn="status";s.Value="0";s.Test="==";s.Order=1;n.Filters.push(s);break;case"deleted":n.Name="Deleted Registrations";h=new JTableFilter;h.ActingOn="status";h.Value="5";h.Test="==";h.Order=1;n.Filters.push(h);break;case"unbalanced":n.Name="Unbalanced Accounts";o=new JTableFilter;o.ActingOn="balance";o.Value="0";o.Test="!=";o.Order=1;o.Link="none";n.Filters.push(o);r.Order=2;r.Link="and";u.Order=3;u.Link="and";n.Filters.push(r);n.Filters.push(u);break;case"refund":n.Name="Refunds Due";c=new JTableFilter;c.ActingOn="balance";c.Value="0";c.Test="<";c.Order=1;n.Filters.push(c);r.Order=2;r.Link="and";u.Order=3;u.Link="and";n.Filters.push(r);n.Filters.push(u);break;case"owed":n.Name="Balances Due";l=new JTableFilter;l.ActingOn="balance";l.Value="0";l.Test=">";l.Order=1;n.Filters.push(l);r.Order=2;r.Link="and";u.Order=3;u.Link="and";n.Filters.push(r);n.Filters.push(u);break;case"rsvpAccept":n.Name="RSVP Accept";a=new JTableFilter;a.ActingOn="rsvp";a.Value="1";a.Test="==";a.Order=1;n.Filters.push(a);f.Link="and";f.Order=2;n.Filters.push(f);break;case"rsvpDecline":n.Name="RSVP Decline";v=new JTableFilter;v.ActingOn="rsvp";v.Value="0";v.Test="==";v.Order=1;n.Filters.push(v);f.Link="and";f.Order=2;n.Filters.push(f)}n.Filtered=!1;n.FilterObject.Generate();n.GetPage()});$("#file_save").css("color","#eeeeee");$("#file_delete").css("color","#eeeeee");$("#file_permissions").css("color","#eeeeee");n.OnGetComplete=function(n,i){typeof i=="undefined"&&(i=$(n.Table));g(i);i.find(".balance").on("click",function(n){n.preventDefault();prettyProcessing.showPleaseWait("Registrant Invoice","Getting Data");var t=new XMLHttpRequest,i=$(this).closest("tr");t.open("get","../RegistrantInvoice/"+i.attr("id"));t.onerror=function(){RESTFUL.showError("500 Internal Server Error","Registrant Invoice Error");prettyProcessing.hidePleaseWait()};t.onload=function(n){var i=n.currentTarget,t;i.status===200?(t=RESTFUL.parse(i),t.Success?(prettyProcessing.hidePleaseWait(),$("#invoiceModal").find(".modal-body").html(t.Html),$("#invoiceModal").modal("show")):(RESTFUL.showError(t.Message,"Registrant Invoice Error"),prettyProcessing.hidePleaseWait())):(RESTFUL.showError("500 Internal Server Error","Registrant Invoice Error"),prettyProcessing.hidePleaseWait())};RESTFUL.ajaxHeader(t);t.send()});EmailSendInformation.bind(".email-information",i);EmailSendInformation.bindEmailList(".email-sendlist",i);i.find(".reg-ajax").on("click",function(n){n.preventDefault();t={};t.id=$(this).attr("data-id");e()});prettyProcessing.hidePleaseWait()};n.OnUpdateComplete=function(n){n.find(".reg-ajax").on("click",function(n){n.preventDefault();t={};t.id=$(this).attr("data-id");e()})};n.AfterLoad=function(t){BREADCRUMB.CURRENT!==null?v(t):setTimeout(function(){v(t)},5e3);n.SavedId!==null&&typeof n.SavedId!="undefined"&&($("#file_save").css("color",""),$("#file_delete").css("color",""),$("#file_permissions").css("color",""),$("#file_delete").attr("data-xhr-options",'{"id":"'+n.SavedId+'"}'));setTimeout(function(){a(n)},1e4)};n.Load(window.location.origin+"/Cloud/Report",TABLE_options);$("#saveEdit").on("click",function(){var o,u,f,s,e,r,h,t;for($("#editModal").find(".editingData").hide("fast"),$("#editModal").find("#editingProgress").show("fast"),o=[],u=0;$('input[name^="Waitlistings['+u+']"]').length>0;){for(f={},s=$('input[name^="Waitlistings['+u+']"]'),e=0;e<s.length;e++)r=$(s[e]),/Key$/i.test(r.attr("name"))?f.Key=r.val():r.attr("type")==="checkbox"&&(f.Value=r.prop("checked")?!0:!1);u++;o.push(f)}h={ComponentKey:i.id,RegistrantKey:i.regKey,Value:$("#editModal").find('[id="'+i.id+'"]').val(),Waitlistings:o};AddJsonAntiForgeryToken(h);t=new XMLHttpRequest;t.open("put",window.location.origin+"/Cloud/SaveRegistrantData",!0);RESTFUL.jsonHeader(t);t.onerror=function(n){RESTFUL.xhrError(n)};t.onload=function(t){var c=t.currentTarget,r,u,h,e,f,s,o;if(c.status===200)if(r=RESTFUL.parse(c),r.Success){for($("#"+i.regKey).find('td[data-headerid="'+i.id+'"]').html(r.NewValue),u=0;u<n.Rows.length;u++)if(n.Rows[u].Id===i.regKey){for(h=!1,e=0;e<n.Rows[u].Columns.length;e++)n.Rows[u].Columns[e].HeaderId===i.id&&(h=!0,n.Rows[u].Columns[e].Value=r.Value,n.Rows[u].Columns[e].PrettyValue=r.PrettyValue);h||(f=new JTableColumn,f.HeaderId=r.HeaderId,f.PrettyValue=r.PrettyValue,f.Value=r.Value,f.Id=r.Id,f.Editable=!0,n.Rows[u].Columns.push(f));n.UpdateRow(n,n.Rows[u],!0)}$("#editModal").modal("hide")}else{for($("#editModal .modal-body").find("#editingProgress").hide("fast"),$("#editModal .modal-body").find("#editingData").show("fast"),s="",o=0;o<r.Errors.length;o++)o!==0&&(s+="<br />"),s+=r.Errors[o];$("#editModal").find(".form-messagebox").html(s).show("fast")}else $("#editModal").modal("hide"),RESTFUL.showError("Unhandled Server Error")};t.send(JSON.stringify(h))});$("#adjustmentDate").datetimepicker();$("#adjust").on("click",function(){var n,i;($(".adjust-warning").hide(),$(".adjustment-error-text").html(""),n={},n.id=t.id,n.ammount=$("#adjustmentAmmount").val(),n.description=$("#adjustmentDescription").val(),n.type=$("#type").val(),n.transactionId=$("#transactionId").val(),n.transactionDate=$("#adjustmentDate").val(),/payment$/i.test(n.type)&&(n.ammount*=-1),i=!1,(isNaN(n.ammount)||n.ammount==="")&&($("#ammountError").html("You must supply a valid number."),$(".ammount-warning").show(),i=!0),(typeof n.description=="undefined"||n.description==="")&&($("#descriptionError").html("You must supply a description."),$(".description-warning").show(),i=!0),i)||($("#adjustment").modal("hide"),n.__RequestVerificationToken=$("input[name=__RequestVerificationToken]").val(),prettyProcessing.showPleaseWait(),$.ajax({url:"../../Cloud/Adjustment",type:"post",data:n,dataType:"json",success:function(n){n.Success?e():alert(n.Message);prettyProcessing.hidePleaseWait()},error:function(){prettyProcessing.hidePleaseWait();alert("The adjustment failed on the server side.")}}))});$("#proccessCC").on("click",function(){var n={},r,i;(n.id=t.id,n.Amount=$("#ccAmount").val(),n.RegistrantKey=t.id,n.FormKey=t.formKey,n.CompanyKey=t.companyKey,n.CardNumber=$("#ccCardNumber").val(),n.NameOnCard=$("#ccNameOnCard").val(),n.ZipCode=$("#ccZipCode").val(),n.CardCode=$("#ccCardCode").val(),n.ExpMonth=$("#ccExpMonth").val(),n.ExpYear=$("#ccExpYear").val(),n.TransactionType=$("#ccTransactionType").val(),n.Live=t.live,n.Address1=$("#ccAddress1").val(),n.Address2=$("#ccAddress2").val(),n.City=$("#ccCity").val(),n.State=$("#ccState").val(),n.Country=$("#ccCountry").val(),n.Phone=$("#ccPhone").val(),n.CardType=$("#ccCardType").val(),r=!1,(isNaN(n.Amount)||n.Amount==="")&&(alert("The amount is invalid."),r=!0),r)||($("#processCCModal").modal("hide"),i=new XMLHttpRequest,i.open("post",window.location.origin+"/api/formgateway",!0),i.onload=function(n){var i=n.currentTarget,t;prettyProcessing.hidePleaseWait();t=JSON.parse(i.responseText);i.status===200?t.Success?e():alert(t.Message):i.status===400&&alert(t.Message)},i.onerror=function(){prettyProcessing.hidePleaseWait();var n=JSON.parse(result.responseText);alert(n.Message)},prettyProcessing.showPleaseWait(),i.send(JSON.stringify(n)))});$("#registrant-activate, #registrant-deactivate, #registrant-delete").on("click",function(n){var i,r;prettyProcessing.showPleaseWait();n.preventDefault();i=$(this);r={};typeof i.attr("data-xhr-options")!="undefined"&&(r=JSON.parse(i.attr("data-xhr-options")));var f=i.attr("href"),t=new XMLHttpRequest,u="put";i.is("#registrant-delete")&&(u="delete");t.open(u,f,!0);RESTFUL.ajaxHeader(t);t.setRequestHeader("Content-Type","application/json");t.onload=function(n){var t,i;n.currentTarget.status===200?(t=RESTFUL.parse(n.currentTarget),t.Success?e():(i=t.Message,RESTFUL.showError(i,"Error Message"))):n.currentTarget.status===400?RESTFUL.showError(n.currentTarget.responseBody,"Bad Request"):RESTFUL.showError("Server Error","Error Message")};t.onerror=function(){prettyProcessing.hidePleaseWait();RESTFUL.showError("Server Error","Error Message")};t.send(JSON.stringify(r))});$("#refund").on("click",function(){prettyProcessing.showPleaseWait();$("#ammountToRefundError").html("");var n={};if(n.id=$("#transaction-id").val(),n.ammount=$("#ammountToRefund").val(),isNaN(n.ammount)){$("#ammountToRefundError").html("You must supply a valid number.");return}$("#partialRefund").modal("hide");AddJsonAntiForgeryToken(n);$.ajax({url:"../../Cloud/RefundAmmount",type:"post",data:n,dataType:"json",success:function(n){n.Success?y():(prettyProcessing.hidePleaseWait(),alert(n.Message))},error:function(){prettyProcessing.hidePleaseWait();alert("The refund failed on the server side.")}})});$(".transaction-refundBalance").on("click",function(n){n.preventDefault();prettyProcessing.showPleaseWait();var t={};t.id=$("#transaction-id").val();AddJsonAntiForgeryToken(t);$.ajax({url:window.location.origin+"/Cloud/RefundBalance",type:"post",data:t,dataType:"json",success:function(n){n.Success?y():(prettyProcessing.hidePleaseWait(),alert(n.Message))},error:function(){prettyProcessing.hidePleaseWait();alert("The refund failed on the server side.")}})});$("#m_registrant-changeset").on("hide.bs.modal",function(){o=null});$("#registrant-adjustment").on("click",function(n){n.preventDefault();$(".adjustment-payment").hide();$(".adjustment-payment-input").val("");$(".adjustment-type").val("Adjustment");$("#adjustment").modal("show")});$("#registrant-payment").on("click",function(n){n.preventDefault();$(".adjustment-payment").show();$(".adjustment-adjustment").hide();$("#adjustment").modal("show")})});
//# sourceMappingURL=Report.min.js.map
