function LoadRegistrations(n,t){$("#mainHolder > section").html('<div class="row"><div class="col-md-12"><h3 class="text-center">Loading Data...<\/h3><\/div><\/div>');formId=n;var i="",r={Id:n,Company:t,RecordsPerPage:recordsPerPage,Page:currentPage,SortType:sort,FilterType:filter,Live:live};$.ajax({url:"../RSCloud/RegistrationData",type:"post",data:JSON.stringify(r),contentType:"application/json",dataType:"json",traditional:"true",success:function(n){var r,s,f,t,e,o,u;if(n.Success){if(registrationData=n.Data,formData=n.Form,totalPages=n.Information.TotalPages,n.Data.length<0)return;for($("#page").html(""),r=1;r<=n.Information.TotalPages;r++)$("#page").append('<option value="'+r+'">'+r+"<\/option>");if($("#page").val(""+currentPage),n.Data.length==0){$("#mainHolder > section").html('<div class="row"><div class="col-md-12"><h3 class="text-center">No Data Matches Criteria<\/h3><\/div><\/div>');return}for(s='<div class="row"><div class="col-md-12">'+n.Form.Name+"<\/div><\/div>",$("#headerText").html(s),f='<option value="Confirmation">Confirmation<\/option><option value="RSVP">RSVP<\/option><option value="Audience">Audience<\/option><option value="Status">Status<\/option><option value="Date">Date<\/option><option value="Type">Type<\/option><option value="Email">Email<\/option>',i+='<div class="table-responsive"><table class="table table-striped table-registration-data"><thead class="dataHeader"><tr>',i+='<th data-id="Confirmation" class="no-wrap">Confirmation<\/th><th data-id="RSVP" class="no-wrap">RSVP<\/th><th data-id="Audience" class="no-wrap">Audience<\/th><th data-id="Status" class="no-wrap">Status<\/th><th data-id="ModifiedDate" class="no-wrap">Date<\/th><th data-id="Type" class="no-wrap">Type<\/th><th data-id="Email" class="no-wrap">Email<\/th>',t=5;t<n.Data[0].Data.length;t++)f+='<option value="'+n.Data[0].Data[t].Key+'">'+n.Data[0].Data[t].Variable+"<\/option>",i+='<th data-id="'+n.Data[0].Data[t].Key+'" class="no-wrap">'+n.Data[0].Data[t].Variable+"<\/th>";for($("#filterColumn").html(f),$('#filterColumn > option[value="'+filter.column+'"]').attr("selected","true"),i+="<\/thead><tbody>",t=0;t<n.Data.length;t++){for(i+='<tr data-id="'+n.Data[t].Id+'" data-index="'+t+'"><td class="conf">'+n.Data[t].Confirmation+"<\/td>",e="Yes",n.Data[t].Data[0].Value=="1"&&(e="No"),i+="<td>"+e+"<\/td>",i+='<td class="audience">RETRIEVING<\/td>',GetAudience(n.Form.Company,n.Data[t].Data[1].Value,n.Data[t].Id),i+="<td>"+GetStatus(n.Data[t].Data[2].Value)+"<\/td>",i+='<td class="no-wrap">'+n.Data[t].RegistrationDate+"<\/td>",o="Live",n.Data[t].Data[3].Value=="0"&&(o="Test"),i+="<td>"+o+"<\/td>",i+='<td data-horizontal="4" onclick="EditData(this, event)" class="editable">'+n.Data[t].Data[4].Value+"<\/td>",u=5;u<n.Data[t].Data.length;u++)i+='<td data-horizontal="'+u+'"  onclick="EditData(this, event)" class="editable">'+n.Data[t].Data[u].ViewValue+"<\/td>";i+="<\/tr>"}i+="<\/tbody><\/table><\/div>";$("#mainHolder > section").html(i);ClickHeaders()}else $("#loadingError #loadingMessage").html(n.Message),$("#loadingError").modal()},error:function(){$("#loadingError").modal("show")}})}function EditData(n){var t=parseInt($(n).attr("data-horizontal")),i;currentIndex=$(n).parent().attr("data-index");currentHorizontal=t;i={id:registrationData[0].Data[t].Key,form:formId,company:companyId,conf:$(n).parent().children(".conf").html()};$.ajax({url:"../RSCloud/GetComponent",type:"post",data:JSON.stringify(i),contentType:"application/json",dataType:"json",traditional:"true",success:function(jsonResult){jsonResult.Success?($("#editDataBody").html(jsonResult.Html),$("#editJavaScript").html(jsonResult.JavaScript),eval(jsonResult.JavaScript),$("#editData").modal("show")):($("#loadingError #loadingMessage").html(jsonResult.Message),$("#loadingError").modal())},error:function(n){$("#loadingError #loadingMessage").html(n.Message);$("#loadingError").modal("show")}})}function ClickHeaders(){$(".dataHeader th").on("click",function(){var n=$(this).attr("data-id"),t=!0;sort.SortColumn==n&&(t=!sort.Ascending);sort.SortColumn=n;sort.Ascending=t;$(this).parent(".dataHeader").children(".sort").remove();LoadRegistrations(formId,companyId)});span=sort.Ascending?'<span class="sort glyphicon glyphicon-arrow-down"><\/span>':'<span class="sort glyphicon glyphicon-arrow-up"><\/span>';$('.dataHeader th[data-id="'+sort.SortColumn+'"]').append(span)}function GetStatus(n){switch(n){case"0":return"Unregistered";case"1":return"Incomplete";case"2":return"Completed"}}function GetAudience(n,t,i){var r={company:n,id:t};$.ajax({url:"../RSCloud/AudienceName",type:"post",data:JSON.stringify(r),contentType:"application/json",dataType:"json",traditional:"true",success:function(n){n.Success?n.Name==""?$('tr[data-id="'+i+'"] > .audience').html("N/A"):$('tr[data-id="'+i+'"] > .audience').html(n.Name):$('tr[data-id="'+i+'"] > .audience').html("Error")},error:function(){$('tr[data-id="'+i+'"] > .audience').html("Error")}})}var recordsPerPage=25,currentPage=1,registrationData,formData,currentIndex,currentHorizontal,totalPages=0,filter={column:"Confirmation",value:""},sort={SortColumn:"Confirmation",Ascending:!0},live=!0;$(document).ready(function(){$("#liveRecords").bootstrapSwitch("size","small");$("#liveRecords").bootstrapSwitch("onColor","success");$("#liveRecords").bootstrapSwitch("offColor","danger");$("#liveRecords").on("switchChange",function(n,t){t.value?(live=!0,LoadRegistrations(formId,companyId)):(live=!1,LoadRegistrations(formId,companyId))});$(".FolderContents").hide();$(".FolderClick").on("click",function(){$(this).parent(".TopFolder").children(".FolderContents").is(":visible")?($(".glyphicon",this).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-right"),$(this).parent(".TopFolder").children(".FolderContents").slideUp(500)):($(".glyphicon",this).removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-down"),$(this).parent(".TopFolder").children(".FolderContents").slideDown(500))});$(".ItemClick").on("click",function(){var t=$(this).attr("data-id"),n;formId=t;n=$(this).attr("data-company");companId=n;sortColumn="Confirmation";ascending=!0;LoadRegistrations(t,n)});$("#recordsPerPage").on("blur",function(){recordsPerPage=$(this).val();currentPage=1;LoadRegistrations(formId,companyId)});$("#page").on("change",function(){currentPage=$(this).val();LoadRegistrations(formId,companyId)});$("#pageLeft").on("click",function(){currentPage>1&&(currentPage--,$("#page").val(currentPage),LoadRegistrations(formId,companyId))});$("#pageRight").on("click",function(){currentPage<totalPages&&(currentPage++,$("#page").val(currentPage),LoadRegistrations(formId,companyId))});$("#filter").on("click",function(){filter.column=$("#filterColumn > option:selected").val();filter.value=$("#filterText").val();LoadRegistrations(formId,companyId)});$("#loadingError").modal();$("#editData").modal();$("#editDataSave").on("click",function(){var r=$("tr[data-index="+currentIndex+"]"),u=$(r).children("[data-horizontal="+currentHorizontal+"]"),t=$("#editVal").val(),n=$("#viewVal").val(),i;(n===null||n===undefined||n=="")&&(n=t);registrationData[currentIndex].Data[currentHorizontal].Value=t;$(u).html(n);$("#editDataBody").html("");i={form:formId,company:companyId,data:registrationData[currentIndex]};$.ajax({url:"../RSCloud/SaveRegistrant",type:"post",data:JSON.stringify(i),contentType:"application/json",dataType:"json",traditional:"true",success:function(n){n.Success||($("#saveError #saveMessage").html(n.Message),$("#saveError").modal())},error:function(){$("#saveError").modal("show");$("#saveMessage").html("")}})})});
//# sourceMappingURL=RegData.min.js.map
