//! Advance Sorting
//! v 1.1.0.0
function Filter(n,t,i){var e;typeof t=="undefined"&&(t=null);e=!1;typeof i=="boolean"&&(e=i);var u=-1,f=-1,r=this;if(this.Table=n,this.Modal=null,e||(this.Modal=FILTER_GenerateModal(t)),this.GenerateActing=function(n){var i,t;for(typeof n=="undefined"&&(n=""),i='<select class="filter-actingon form-control"><option>Make a Selection<\/option>',t=0;t<this.Table.Headers.length;t++)i+='<option value="'+this.Table.Headers[t].Id+'"'+(this.Table.Headers[t].Id===n?' selected="selected"':"")+">"+this.Table.Headers[t].Label+"<\/option>";return i+"<\/select>"},this.Generate=function(){var t,f,n,i,e;if(this.Modal!==null){for(this.Modal.find(".table-filter-body").html(""),u=-1,t="",f=0;f<this.Table.Filters.length;f++)u++,n=this.Table.Filters[f],i=FindHeader(this.Table,n.ActingOn),t='<tr class="filter" data-index="'+u+'"><td><input type="hidden" class="filter-groupNext-value" />',t+='<input type="checkbox" class="filter-groupNext" /> <a href="#" class="filter-delete"><span class="glyphicon glyphicon-trash"><\/span><\/a>',t+="<\/td>",t+="<td>",f===0?t+='<input type="hidden" class="filter-link" value="none" />':(t+='<select class="filter-link form-control">',t+='<option value="and"'+(n.Link==="and"?' selected="selected"':"")+">And<\/option>",t+='<option value="or"'+(n.Link==="or"?' selected="selected"':"")+">Or<\/option>",t+="<\/select>"),t+="<\/td>",t+="<td>",t+=this.GenerateActing(n.ActingOn),t+="<\/td>",t+="<\/td>",t+="<td>",t+='<select class="filter-test form-control">',t+="<\/select>",t+="<\/td>",t+="<td>",t+=this.GenerateValueInput(i,n.Value),t+="<\/td>",t+="<\/tr>",this.Modal.find(".table-filter-body").append(t),e="",e=i.Type==="itemParent"?'<option value="=="'+(n.Test==="=="?' selected="selected"':"")+'>Equals<\/option><option value="!="'+(n.Test==="!="?' selected="selected"':"")+">Not Equals<\/option>":i.Type==="multipleSelection"?'<option value="=="'+(n.Test==="=="?' selected="selected"':"")+'>Equals<\/option><option value="!="'+(n.Test==="!="?' selected="selected"':"")+'>Not Equals<\/option><option value="in"'+(n.Test==="in"?' selected="selected"':"")+'>In<\/option><option value="notin"'+(n.Test==="notin"?' selected="selected"':"")+">Not In<\/option>":i.Type==="number"||i.Type.indexOf("rating")===0?'<option value="=="'+(n.Test==="=="?' selected="selected"':"")+'>Equals<\/option><option value="!="'+(n.Test==="!="?' selected="selected"':"")+'>Not Equals<\/option><option value=">"'+(n.Test===">"?' selected="selected"':"")+'>Greater Than<\/option><option value=">="'+(n.Test===">="?' selected="selected"':"")+'>Greater Than or Equal<\/option><option value="<"'+(n.Test==="<"?' selected="selected"':"")+'>Less Than<\/option><option value="<="'+(n.Test==="<="?' selected="selected"':"")+">Less Than or Equal<\/option>":i.Type==="date"?'<option value="=="'+(n.Test==="=="?' selected="selected"':"")+'>Equals<\/option><option value="!="'+(n.Test==="!="?' selected="selected"':"")+'>Not Equals<\/option><option value=">"'+(n.Test===">"?' selected="selected"':"")+'>Greater Than<\/option><option value=">="'+(n.Test===">="?' selected="selected"':"")+'>Greater Than or Equal<\/option><option value="<"'+(n.Test==="<"?' selected="selected"':"")+'>Less Than<\/option><option value="<="'+(n.Test==="<="?' selected="selected"':"")+">Less Than or Equal<\/option>":'<option value="=="'+(n.Test==="=="?' selected="selected"':"")+'>Equals<\/option><option value="!="'+(n.Test==="!="?' selected="selected"':"")+'>Not Equals<\/option><option value="^="'+(n.Test==="^="?' selected="selected"':"")+'>Starts With<\/option><option value="!^="'+(n.Test==="!^="?' selected="selected"':"")+'>Does Not Start With<\/option><option value="$="'+(n.Test==="$="?' selected="selected"':"")+'>Ends With<\/option><option value="!$="'+(n.Test==="!$="?' selected="selected"':"")+'>Does Not End With<\/option><option value="=rgx="'+(n.Test==="=rgx="?' selected="selected"':"")+'>Regex Match<\/option><option value="!=rgx="'+(n.Test==="!=rgx="?' selected="selected"':"")+'>Regex Mismatch<\/option><option value="*="'+(n.Test==="*="?' selected="selected"':"")+'>Contains<\/option><option value="!*="'+(n.Test==="!*="?' selected="selected"':"")+'>Does Not Contain<\/option><option value=">"'+(n.Test===">"?' selected="selected"':"")+'>Greater Than<\/option><option value=">="'+(n.Test===">="?' selected="selected"':"")+'>Greater Than or Equal<\/option><option value="<"'+(n.Test==="<"?' selected="selected"':"")+'>Less Than<\/option><option value="<="'+(n.Test==="<="?' selected="selected"':"")+">Less Than or Equal<\/option>",$('tr[data-index="'+u+'"] .filter-test').html(e);this.Modal.find(".filter-actingon").on("change",function(){var n=$(this).closest("tr"),t=parseInt(n.attr("data-index"));r.ActingOnChange(n)});this.Modal.find(".filter-delete").on("click",function(n){r.DeleteStatement($(this).closest("tr"),n)})}},this.DeleteStatement=function(n,t){(t.preventDefault(),this.Modal!==null)&&(n.remove(),this.Modal.find(".filter").css("background-color","inherit"),this.Modal.find(".filter").find('input[name$="GroupNext"]').val("false"),f=-1,this.Modal.find("tr.filter").each(function(n){u=n;$(this).find("input").each(function(){var n=$(this).attr("name");typeof n!="undefined"&&(n=n.replace(/\[\d+\]/,"["+u+"]"),$(this).attr("name",n))});$(this).find('input[name$="Order"]').val(u+1)}),u--)},this.AddStatement=function(){if(this.Modal!==null){u++;var t=new JTableFilter,i=FindHeader(this.Table,t.ActingOn),n='<tr class="filter" data-index="'+u+'"><td><input type="hidden" class="filter-groupNext-value" />';n+='<input type="checkbox" class="filter-groupNext" /> <a href="#" class="filter-delete"><span class="glyphicon glyphicon-trash"><\/span><\/a>';n+="<\/td>";n+="<td>";this.Modal.find(".filter").length===0?n+='<input type="hidden" class="filter-link" value="none" />':(n+='<select class="filter-link form-control">',n+='<option value="and">And<\/option>',n+='<option value="or">Or<\/option>',n+="<\/select>");n+="<\/td>";n+="<td>";n+=this.GenerateActing();n+="<\/td>";n+="<\/td>";n+="<td>";n+='<select class="filter-test form-control">';n+="<\/select>";n+="<\/td>";n+="<td>";n+=this.GenerateValueInput(i);n+="<\/td>";n+="<\/tr>";this.Modal.find(".table-filter-body").append(n);this.Modal.find('.filter[data-index="'+u+'"]').find(".filter-actingon").on("change",function(){var n=$(this).closest("tr"),t=parseInt(n.attr("data-index"));r.ActingOnChange(n)});this.Modal.find('.filter[data-index="'+u+'"]').find(".filter-delete").on("click",function(n){var t=$(this).closest("tr");r.DeleteStatement(t,n)})}},this.Group=function(n){var r;if(n.preventDefault(),this.Modal!==null){if(r=this.Modal.find(".filter-groupNext:checked").length,r>1)f++;else return;f>=FILTER_colors.length&&(f=0);var u=!1,e=!1,t=null,o=0,i=[];this.Modal.find(".filter-groupNext").each(function(){if(u&&($(this).is(":checked")||(e=!0)),$(this).is(":checked")&&!e){var n=$(this).closest("tr");o++;u=!0;t=n.find(".filter-groupNext");t.val("true");n.css("background-color",FILTER_colors[f]);i.push(n)}});o==1&&(i[0].css("background-color","inherit"),i[0].find(".filter-groupNext-value").val("false"));t.val("false");this.Modal.find(".filter-groupNext").prop("checked",!1)}},this.Ungroup=function(n){(n.preventDefault(),this.Modal!==null)&&(this.Modal.find(".filter").css("background-color","inherit"),this.Modal.find(".filter").find(".filter-groupNext-value").val("false"),f=-1)},this.ActingOnChange=function(n){var i;try{n.find(".rating").rating("destroy")}catch(f){}var r=n.find(".filter-value"),t=FindHeader(this.Table,n.find(".filter-actingon").val()),u=this.GenerateValueInput(t);r.replaceWith(u);i="";i=t.Type==="itemParent"||t.Type==="boolean"?'<option value="==">Equals<\/option><option value="!=">Not Equals<\/option>':t.Type==="multipleSelection"?'<option value="==">Equals<\/option><option value="!=">Not Equals<\/option><option value="in">In<\/option><option value="notin">Not In<\/option>':t.Type==="number"||t.Type.indexOf("rating")===0?'<option value="==">Equals<\/option><option value="!=">Not Equals<\/option><option value=">">Greater Than<\/option><option value=">=">Greater Than or Equal<\/option><option value="<">Less Than<\/option><option value="<=">Less Than or Equal<\/option>':t.Type==="date"?'<option value="==">Equals<\/option><option value="!=">Not Equals<\/option><option value=">">Greater Than<\/option><option value=">=">Greater Than or Equal<\/option><option value="<">Less Than<\/option><option value="<=">Less Than or Equal<\/option>':'<option value="==">Equals<\/option><option value="!=">Not Equals<\/option><option value="^=">Starts With<\/option><option value="!^=">Does Not Start With<\/option><option value="$=">Ends With<\/option><option value="!$=">Does Not End With<\/option><option value="=rgx=">Regex Match<\/option><option value="!=rgx=">Regex Mismatch<\/option><option value="*=">Contains<\/option><option value="!*=">Does Not Contain<\/option><option value=">">Greater Than<\/option><option value=">=">Greater Than or Equal<\/option><option value="<">Less Than<\/option><option value="<=">Less Than or Equal<\/option>';n.find(".filter-test").html(i);try{n.find(".rating").rating()}catch(f){}try{n.find(".datetimepicker").datetimepicker()}catch(f){}},this.GenerateValueInput=function(n,t){var i,r,u,f;if(typeof t=="undefined"&&(t=""),i="",n===null)return'<span class="filter-value">Make a Selection<\/span>';if(n.Type==="itemParent"||n.Type==="multipleSelection"||n.Type==="boolean"){for(i+='<select class="filter-value form-control">',r=0;r<n.PossibleValues.length;r++)i+='<option value="'+n.PossibleValues[r].Id+'"'+(n.PossibleValues[r].Id===t?' selected="true"':"")+">"+n.PossibleValues[r].Label+"<\/option>";i+="<\/select>"}else n.Type.indexOf("rating")===0?(t===""&&(t="0"),u=n.Type,u=u.split("=>")[1],f=JSON.parse(u),i+='<input class="filter-value form-control rating" min="'+f.min+'" max="'+f.max+'" data-step="'+f.step+'" type="number" value="'+t+'" />'):i+='<input class="filter-value form-control'+(n.Type==="date"?" datetimepicker":"")+'" value="'+t+'" />';return i},this.Modal!==null){this.Modal.find(".set-filters").on("click",function(){r.Modal.modal("hide");r.Table.Filters=[];r.Modal.find(".filter").each(function(n){var i=$(this),t=new JTableFilter;t.GroupNext=i.find(".filter-groupNext-value").val().toLowerCase()==="true";t.ActingOn=i.find(".filter-actingon").val();t.Link=i.find(".filter-link").val();t.Order=n;t.Test=i.find(".filter-test").val();t.Value=i.find(".filter-value").val();r.Table.Filters.push(t)});r.Table.Filtered=!1;r.Table.GetPage()});this.Modal.find(".add-filter").on("click",function(n){n.preventDefault();r.AddStatement()});this.Modal.find(".ungroup").on("click",function(n){r.Ungroup(n)});this.Modal.find(".group").on("click",function(n){r.Group(n)})}}function FILTER_GenerateModal(n){var i,t;return(n===null&&(n="m_filter"+ ++FILTER_modalIndex),n.legth>0&&n[0]==="#"&&(n=n.substr(1,n.length)),i=$(n),i.length>0)?i:(t='<div class="modal fade" id="'+n+'"><div class="modal-dialog modal-lg"><div class="modal-header"><h3 class="modal-title">Filters<\/h3><\/div>',t+='<div class="modal-body"><div class="add-padding-top text-color-1"><h4>Current Filters<\/h4><\/div>',t+='<div class="row color-grey-2 add-padding-vertical-5"><div class="col-sm-6"><div class="add-padding-vertical-5"><a href="#" class="group"><span class="glyphicon glyphicon-link"><\/span> Group Selected<\/a><\/div><\/div>',t+='<div class="col-sm-6"><div class="add-padding-vertical-5"><a href="#" class="ungroup"><span class="glyphicon glyphicon-link"><\/span> Ungroup All<\/a><\/div><\/div><\/div>',t+='<div class="row"><table class="table table-filter">',t+="<thead><tr><th><\/th><th>Link<\/th><th>Variable<\/th><th>Test<\/th><th>Value<\/th><\/tr><\/thead>",t+='<tbody class="table-filter-body"><\/tbody><tfoot><tr><td colspan="5"><a href="#" class="add-filter"><span class="glyphicon glyphicon-small glyphicon-plus"><\/span> New Statement<\/a><\/td><\/tr><\/tbody>',t+='<\/table><\/div><\/div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancel<\/button><button type="button" class="btn btn-default set-filters">Apply Filters<\/button>',t+="<\/div><\/div><\/div>",$("body").append(t),$("#"+n))}function Sorting(n,t,i){var f;typeof t=="undefined"&&(t=null);f=!1;typeof i=="boolean"&&(f=i);var u=-1,e=-1,r=this;if(this.Table=n,this.Modal=null,f||(this.Modal=SORTING_GenerateModal(t)),this.GenerateActing=function(n){var i,t;for(typeof n=="undefined"&&(n=""),i='<select class="sorting-actingon form-control">',t=0;t<this.Table.Headers.length;t++)i+='<option value="'+this.Table.Headers[t].Id+'"'+(this.Table.Headers[t].Id===n?' selected="selected"':"")+">"+this.Table.Headers[t].Label+"<\/option>";return i+"<\/select>"},this.Generate=function(){var n,t,i;if(this.Modal!==null){for(this.Modal.find(".table-sorting-body").html(""),u=-1,n="",t=0;t<this.Table.Sortings.length;t++)i=this.Table.Sortings[t],u++,n='<tr class="sorting" data-index="'+u+'"><td>',n+='<a href="#" class="sorting-delete"><span class="glyphicon glyphicon-trash"><\/span><\/a>',n+="<\/td>",n+="<td>",n+=this.GenerateActing(i.ActingOn),n+="<\/td>",n+="<td>",n+='<select class="form-control sorting-ascending">',n+='<option value="true"'+(i.Ascending?' selected="selected"':"")+">Ascending<\/option>",n+='<option value="false"'+(i.Ascending?"":' selected="selected"')+">Descending<\/option>",n+="<\/select>",n+="<\/td>",n+="<\/tr>",this.Modal.find(".table-sorting-body").append(n);$(".sorting-delete").on("click",function(n){r.DeleteSorting($(this).parents("tr"),n)})}},this.DeleteSorting=function(n,t){(t.preventDefault(),this.Modal!==null)&&($(n).remove(),this.Modal.find(".sorting").css("background-color","inherit"),this.Modal.find(".sorting-groupnext").prop("checked",!1),e=-1,this.Modal.find(".sorting").each(function(n){u=n;$(this).attr("data-index",n)}),u--)},this.AddSorting=function(){u++;var n='<tr class="sorting" data-index="'+u+'"><td>';n+='<a href="#" class="sorting-delete"><span class="glyphicon glyphicon-trash"><\/span><\/a>';n+="<\/td>";n+="<td>";n+=this.GenerateActing();n+="<\/td>";n+="<td>";n+='<select class="form-control sorting-ascending">';n+='<option value="true">Ascending<\/option>';n+='<option value="false">Descending<\/option>';n+="<\/select>";n+="<\/td>";n+="<\/tr>";$(".table-sorting-body").append(n);$('.sorting[data-index="'+u+'"]').find(".sorting-delete").on("click",function(n){r.DeleteSorting($(this).closest("tr"),n)})},this.Modal!==null){this.Modal.find(".set-sortings").on("click",function(){r.Modal.modal("hide");r.Table.Sortings=[];r.Modal.find(".sorting").each(function(n){var t=new JTableSorting;t.ActingOn=$(this).find(".sorting-actingon").val();t.Order=n;t.Ascending=$(this).find(".sorting-ascending").val().toLowerCase()==="true";r.Table.Sortings.push(t);r.Table.Sorted=!1});r.Table.GetPage()});this.Modal.find(".add-sorting").on("click",function(n){n.preventDefault();r.AddSorting()})}}function SORTING_GenerateModal(n){var i,t;return(n===null&&(n="m_sorting"+ ++SORTING_modalIndex),n.legth>0&&n[0]==="#"&&(n=n.substr(1,n.length)),i=$(n),i.length>0)?i:(t='<div class="modal fade" id="'+n+'"><div class="modal-dialog modal-lg"><div class="modal-header"><h3 class="modal-title">Sortings<\/h3><\/div>',t+='<div class="modal-body"><div class="add-padding-top text-color-1"><h4>Current Sortings<\/h4><\/div>',t+='<div class="row"><table class="table table-sorting">',t+="<thead><tr><th><\/th><th>Header<\/th><th>Sort Order<\/th><\/tr><\/thead>",t+='<tbody class="table-sorting-body"><\/tbody><tfoot><tr><td colspan="5"><a href="#" class="add-sorting"><span class="glyphicon glyphicon-small glyphicon-plus"><\/span> New Statement<\/a><\/td><\/tr><\/tbody>',t+='<\/table><\/div><\/div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancel<\/button><button type="button" class="btn btn-default set-sortings">Apply Sortings<\/button>',t+="<\/div><\/div><\/div>",$("body").append(t),$("#"+n))}function JTable(n,t){"use strict";var r=++JTables.tableIndex,u=!1,i,f;if(typeof t=="boolean"&&(u=t),this.Table=n,(typeof n=="undefined"||n==null)&&(this.Table="#jTable"+r),i=this,f="",!u){$("body").append(GenerateHeaderDiv("headerSelection"+r));$("#headerSelection"+r).find(".add-header").on("click",function(n){n.preventDefault();var t=$("#headerSelection"+r);t.find(".header-available:checked").each(function(){for(var t,r,f=$(this).val(),u=!1,n=0;n<i.Headers.length;n++)t=i.Headers[n],t.Id===f&&(u=!0,t.Removed=!1);u&&(r=$(this).closest("label"),r.find("input").removeClass("header-available").addClass("header-selected"),r.parent().appendTo(".headers-container-selected"),$(".headers-container-selected .header-move").show(),$(".headers-container-selected .header-div").first().find(".header-up").hide(),$(".headers-container-selected .header-div").last().find(".header-down").hide())});t.find(".header-item").prop("checked",!1)});$("#headerSelection"+r).find(".remove-header").on("click",function(n){n.preventDefault();var t=$("#headerSelection"+r);$(".header-selected:checked").each(function(){for(var r,n,f=$(this).val(),u=!1,t=0;t<i.Headers.length;t++)r=i.Headers[t],r.Id===f&&(u=!0,r.Removed=!0);u&&(n=$(this).closest("label"),n.find("input").removeClass("header-selected").addClass("header-available"),n.parent().appendTo(".headers-container-available"),n.parent().find(".header-move").hide())});$(".header-item").prop("checked",!1)});$("#headerSelection"+r).on("show.bs.modal",function(){var t=$(this),u,r,n;for(t.find(".headers-container-selected").html(""),t.find(".headers-container-available").html(""),u=i.Headers.sort(function(n,t){return n.Order-t.Order}),r=0;r<u.length;r++){if(n=u[r],n.Id==="confirmation"){t.find(".headers-container-selected").append('<label style="display: none;"><input type="checkbox" value="'+n.Id+'" class="header-item header-selected" />'+n.Label+"<\/label>");continue}n.Removed?t.find(".headers-container-available").append('<div class="header-div" data-id="'+n.Id+'"><label><input type="checkbox" value="'+n.Id+'" class="header-item header-available" />'+n.Label+'<\/label> <span class="header-move header-up cursor-pointer glyphicon glyphicon-arrow-up" data-id="'+n.Id+'"><\/span> <span class="header-move header-down cursor-pointer glyphicon glyphicon-arrow-down" data-id="'+n.Id+'"><\/span><\/div>'):t.find(".headers-container-selected").append('<div class="header-div" data-id="'+n.Id+'"><label><input type="checkbox" value="'+n.Id+'" class="header-item header-selected" />'+n.Label+'<\/label> <span class="header-move header-up cursor-pointer glyphicon glyphicon-arrow-up" data-id="'+n.Id+'"><\/span> <span class="header-move header-down cursor-pointer glyphicon glyphicon-arrow-down" data-id="'+n.Id+'"><\/span><\/div>')}t.find(".headers-container-available .header-move").hide();t.find(".headers-container-selected .header-div").first().find(".header-up").hide();t.find(".headers-container-selected .header-div").last().find(".header-down").hide();$(".header-move").on("click",function(){var t=$(this),u=t.attr("data-id"),n=$(this).parent(),i=n.prev(),r=n.next();if(t.hasClass("header-up")){if(i.length===0)return;n.insertBefore(i)}else{if(r.length===0)return;n.insertAfter(r)}$(".headers-container-selected .header-move").show();$(".headers-container-selected .header-div").first().find(".header-up").hide();$(".headers-container-selected .header-div").last().find(".header-down").hide()})});$("#headerSelection"+r).find(".headers-set").on("click",function(){$(this).closest(".modal").modal("hide");var n=0;$(".headers-container-selected .header-div").each(function(){var t=FindHeader(i,$(this).attr("data-id"));t!==null&&(t.Order=++n)});$(".headers-container-available .header-div").each(function(){var t=FindHeader(i,$(this).attr("data-id"));t!==null&&(t.Order=++n)});i.GetPage()});$('.jTable_headers-edit[data-jtable-target="'+this.Table+'"]').on("click",function(n){n.preventDefault();$("#headerSelection"+r).modal("show")});$('.jTable_pageLeft[data-jtable-target="'+this.Table+'"]').on("click",function(){i.Page!==1&&(i.Page--,$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"]').val(i.Page),i.GetPage())});$('.jTable_pageRight[data-jtable-target="'+this.Table+'"]').on("click",function(){i.Page!==i.TotalPages()&&(i.Page++,$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"]').val(i.Page),i.GetPage())});$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"]').on("change",function(){i.Page=parseInt($(this).val());i.GetPage()});$('.jTable_recordsPerPage[data-jtable-target="'+this.Table+'"]').on("blur",function(){var n=$(this).val();isNaN(n)?($(this).val(25),i.RecordsPerPage=25,i.GetPage()):(i.RecordsPerPage=parseInt(n),i.GetPage())});$('.jTable_average[data-jtable-target="'+this.Table+'"]').on("change",function(){i.Average=$(this).prop("checked");i.GetPage()});$('.jTable_graph[data-jtable-target="'+this.Table+'"]').on("change",function(){i.Graph=$(this).prop("checked");i.GetPage()});$('.jTable_count[data-jtable-target="'+this.Table+'"]').on("change",function(){i.Count=$(this).prop("checked");i.GetPage()});$('.jTable_sortings-clearAll[data-jtable-target="'+this.Table+'"]').on("click",function(n){n.preventDefault();i.Sortings=[];i.SortingObject.Generate();i.Sorted=!1;i.GetPage()});$('.jTable_sortings-edit[data-jtable-target="'+this.Table+'"]').on("click",function(n){n.preventDefault();i.SortingObject.Modal.modal("show")});$('.jTable_filters-clearAll[data-jtable-target="'+this.Table+'"]').on("click",function(n){n.preventDefault();i.Filters=[];i.FilterObject.Generate();i.Filtered=!1;i.GetPage()});$('.jTable_filters-edit[data-jtable-target="'+this.Table+'"]').on("click",function(n){n.preventDefault();i.FilterObject.Modal.modal("show")});$('.jTable_favorite[data-jtable-target="'+this.Table+'"]').on("click",function(){i.Favorite?($(this).html('<span class="glyphicon glyphicon-star-empty"><\/span> Favorite'),i.Favorite=!1):($(this).html('<span class="glyphicon glyphicon-star"><\/span> Un-Favorite'),i.Favorite=!0)});$('.jTable_headers-clearAll[data-jtable-target="'+this.Table+'"]').on("click",function(n){var t,r;for(n.preventDefault(),t=0;t<i.Headers.length;t++)(r=i.Headers[t],r.Id!=="confirmation")&&(r.Removed=!0);i.GetPage()});$('.jTable_headers-addAll[data-jtable-target="'+this.Table+'"]').on("click",function(n){var t,r;for(n.preventDefault(),t=0;t<i.Headers.length;t++)r=i.Headers[t],r.Removed=!1;i.GetPage()})}this.LastFullCheck=moment();this.SortingObject=new Sorting(this,null,u);this.FilterObject=new Filter(this,null,u);this.Options={};this.Average=!1;this.Graph=!1;this.Count=!1;this.Headers=[];this.Rows=[];this.Parent="New Table";this.Name="New Table";this.Description="";this.Id="";this.RecordsPerPage=250;this.TotalRecords=0;this.Sortings=[];this.Filters=[];this.Page=1;this.Filtered=!1;this.Sorted=!1;this.SavedId=null;this.Favorite=!1;this.FilteredRows=[];this.FilteredRecords=function(){return this.FilteredRows.length};this.TotalPages=function(){var n=Math.ceil(this.FilteredRows.length/this.RecordsPerPage);return n===0?1:n};this.OnGetComplete=function(){};this.GetPage=function(n,t){var r,o,p,a,w,u,v,s,l,b,e;for(typeof n=="undefined"&&(n=this.Table),/^\./.test(n)||/^#/.test(n)||(n="#"+n),typeof t=="undefined"&&(t=this.Page),this.Filtered||this.Filter(),this.Sorted||this.Sort(),t>this.TotalPages()&&t!==1&&(t=1),r=[],$(".jTable_pageSelect").html(i.FilteredRecords()),$(".jTable_pageSelect").html(""),o=0;o<this.TotalPages();o++)$(".jTable_pageSelect").append('<option value="'+(o+1)+'" '+(this.Page===o+1?'selected="selected"':"")+">"+(o+1)+"<\/option>");for(p=(t-1)*this.RecordsPerPage,a=[],this.Headers.sort(function(n,t){return n.Order-t.Order}),a=this.Count?this.GetCount(this,r):this.Average?this.GetAverage(this,r):this.Graph?this.GetGraph(this,r):this.GetNormal(this,p),w=this.GenerateTableHtml(this,a),$(n).html(w),u=0;u<r.length;u++){v="<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%><li><span style=\"background-color:<%=segments[i].fillColor%>\"><\/span><%if(segments[i].label){%><b><%=segments[i].label%><\/b>: <%=+(Math.round(((segments[i].value / total) * 100) + 'e+2')  + 'e-2')%>%<%}%><\/li><%}%><\/ul>";this.Count&&(v='<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><b><%=segments[i].label%><\/b>: <%=segments[i].value%><%}%><\/li><%}%><\/ul>');s={};l={};switch(r[u].type){case"pie":s=$("#"+r[u].id).get(0).getContext("2d");l=new Chart(s).Pie(r[u].data,{legendTemplate:v});b=l.generateLegend();$("#"+r[u].id).parent().parent().children(".legend").html(b);break;case"bar":var k=10,y=100,f=100,h={},c=r[u].data;if(this.Count){for(e=0;e<c.datasets[0].data.length;e++)y<c.datasets[0].data[e]&&(y=c.datasets[0].data[e]),f>c.datasets[0].data[e]&&(f=c.datasets[0].data[e]);f=f-10-f%10;f<0&&(f=0)}else f=0;h.scaleOverride=!0;h.scaleSteps=Math.ceil((y-f)/k);h.scaleStepWidth=k;h.scaleStartValue=f;s=$("#"+r[u].id).get(0).getContext("2d");l=new Chart(s).Bar(r[u].data,h)}}this.CreateLinks();this.OnGetComplete(this)};this.CreateLinks=function(){$(this.Table).find("a").each(function(){var t=$(this),i,r,f,o,e,u,n;if(t.attr("href")==="#"&&(i=t.attr("data-action"),r=t.attr("data-controller"),typeof i=="undefined"&&(i=null),typeof r=="undefined"&&(r=null),f=t.attr("data-options"),typeof f=="undefined"&&(f="{}"),o=JSON.parse(f),i!==null&&r!==null)){for(e=window.location.origin+"/"+r+"/"+i+"?",u=Object.keys(o),n=0;n<u.length;n++)e+=u[n]+"="+o[u[n]],n!==u.length-1&&(e+="&");t.attr("href",e)}})};this.AddSorting=function(n){n.Order=this.Sortings.length+1;this.Sortings.push(n);this.Sorted=!1};this.ClearSortings=function(){this.Sortings=[];this.Sorted=!1};this.ClearFilters=function(){this.Filters=[];this.Filtered=!1};this.AddFilter=function(n){n.Order=this.Filters.length+1;this.Filters.push(n);this.Filtered=!1};this.Filter=function(){var h,n,e,o,s,u;for(this.FilteredRows=[],this.Filters.sort(function(n,t){return n.Order-t.Order}),h=0;h<this.Rows.length;h++){var i=!1,c=!0,t=[],l=this.Rows[h];for(n=0;n<this.Filters.length;n++){var r=this.Filters[n],f=!0,a=!0;c=r.GroupNext;e=!1;do{for(r.GroupNext||(c=!1),o=null,s=0;s<l.Columns.length;s++)if(l.Columns[s].HeaderId===r.ActingOn){o=l.Columns[s];break}o!==null&&(e=TestValue(o,r.Value.toLowerCase(),r.Test,FindHeader(this,o.HeaderId)));switch(r.Link){case"and":f=f&&e;break;case"or":f=a?e:f||e;break;default:f=e}if(a=!1,!c)break;if(n++,n<this.Filters.length)r=this.Filters[n];else break}while(c);t.push({test:f,link:n<this.Filters.length-1?this.Filters[n+1].Link:"none"})}for(i=t.length>0?t[0].test:!0,u=1;u<t.length;u++)switch(t[u-1].link){case"and":i=i&&t[u].test;break;case"or":i=i||t[u].test;break;default:i=t[u].test}i&&this.FilteredRows.push(l)}this.Filters.length===0&&(this.FilteredRows=this.Rows);this.Page=1;this.Filtered=!0;this.Sort();$('.jTable_totalRecords[data-jtable-target="'+this.Table+'"]').html(this.FilteredRows.length)};this.Sort=function(){var n,t;for(this.Filtered||this.Filter(),this.Sortings.length>0&&(this.Sortings.sort(function(n,t){return n.Order-t.Order}),n=this.Sortings,this.FilteredRows.sort(function(t,r){var u=0,h=0,c=FindHeader(i,n[u].ActingOn);if(c===null)return 1;var o=FindColumn(t,n[u].ActingOn),s=FindColumn(r,n[u].ActingOn),f=null,e=null;if(o!==null&&o.Value!==null&&(f=o.Value),s!==null&&s.Value!==null&&(e=s.Value),c.SortByPretty&&(f=o!=null?o.PrettyValue:null,e=s!=null?s.PrettyValue:null),f===null&&(f=""),e===null&&(e=""),h=c.Id==="confirmation"?advSorting.HexSort(f,e,n[u].Ascending):advSorting.NaturalSort(f,e,n[u].Ascending),h===0)for(u++;h===0;){if(u>=n.length)break;o=FindColumn(t,n[u].ActingOn);s=FindColumn(r,n[u].ActingOn);f=o.Value;e=s.Value;c.SortByPretty&&(f=o.PrettyValue,e=s.PrettyValue);f===null&&(f="");e===null&&(e="");h=c.Id==="confirmation"?advSorting.HexSort(f,e,n[u].Ascending):advSorting.NaturalSort(f,e,n[u].Ascending);u++}return h})),t=0;t<this.FilteredRows.length;t++)this.FilteredRows[t].Order=t+1;this.Sorted=!0};this.GetAverage=function(n,t){for(var c,p,e,l,w,h,it,b,et,k,a,y,o,rt,ct,ut=[],nt=new JTableRow,i=0;i<n.Headers.length;i++){if(n.Headers[i].Id==="email"){n.Headers[i].Hidden=!0;continue}else n.Headers[i].Hidden=!1;var r=new JTableColumn,tt=0,s=0,ft=!0,f={},u=[];for(c=0;c<n.Headers[i].PossibleValues.length;c++)f[n.Headers[i].PossibleValues[c].Label]=0,u.push({key:n.Headers[i].PossibleValues[c].Label,total:0});for(p=0;p<n.FilteredRows.length;p++)if(e=FindColumn(n.FilteredRows[p],n.Headers[i].Id),e!==null)switch(n.Headers[i].Type.root("=>")){case"itemParent":typeof f[e.PrettyValue]=="undefined"&&(f[e.PrettyValue]=0,u.push({key:e.PrettyValue,total:0}));f[e.PrettyValue]++;s++;break;case"multipleSelection":for(l=JSON.parse(e.Value),w=[],h=0;h<l.length;h++){for(it=!1,b=0;b<w.length;b++)if(w[b]===l[h]){it=!0;break}if(it)continue;else w.push(l[h]);for(et=l[h],k=null,a=0;a<n.Headers[i].PossibleValues.length;a++)n.Headers[i].PossibleValues[a].Id===et&&(k=n.Headers[i].PossibleValues[a]);k!==null&&f[k.Label]++}s++;break;case"boolean":e.Value==="1"?f.Yes++:f.No++;s++;break;case"number":case"rating":tt+=parseFloat(e.Value);s++;break;default:ft=!1}if(ft){r.HeaderId=n.Headers[i].Id;r.Id=n.Headers[i].Id;r.Value=tt/s;r.PrettyValue=r.Value;var d="",ot=[],st=[],ht=[],v=-1,g="<table><tbody>";switch(n.Headers[i].Type.root("=>")){case"multipleSelection":case"itemParent":case"boolean":for(y=0;y<u.length;y++)u[y].total=f[u[y].key];for(u.sort(function(n,t){return t.total-n.total}),o=0;o<u.length;o++)v++,rt=f[u[o].key]/s*100,v>4&&(v=0),ot.push({value:f[u[o].key],color:graphColors[v].color,highlight:graphColors[v].highlight,label:u[o].key}),ht.push(u[o].key),st.push(rt),g+='<tr><td style="text-align: right; padding-right: 3px; font-weight: bold;">'+u[o].key+":<\/td><td>"+rt.toFixed(2)+"%<\/td><\/tr>";g+="<\/tbody><\/table>";r.Value=g;d=g;n.Graph&&(n.Headers[i].Type==="multipleSelection"?(ct={labels:ht,datasets:[{label:"Selections",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:st}]},d='<div class="labeled-chart-container"><div class="canvas-holder"><canvas id="chart_'+r.Id+'" width="300" height="300"><\/canvas><\/div><div class="legend"><\/div><\/div>',t.push({id:"chart_"+r.Id,data:ct,type:"bar"})):(d='<div class="labeled-chart-container"><div class="canvas-holder"><canvas id="chart_'+r.Id+'" width="500" height="300"><\/canvas><\/div><div class="legend"><\/div><\/div>',t.push({id:"chart_"+r.Id,data:ot,type:"pie"})));r.PrettyValue=d;nt.Columns.push(r);break;case"number":case"rating":r.Value=Math.roundAdv(tt/s,2);r.PrettyValue=r.Value;nt.Columns.push(r);break;default:n.Headers[i].Hidden=!0}}else n.Headers[i].Hidden=!0}return ut.push(nt),ut};this.GetGraph=function(n,t){return this.GetAverage(n,t)};this.GetCount=function(n,t){for(var c,b,k,l,d,s,e,a,g,h,ft,nt,ht,tt,v,p,o,vt,et=[],ut=new JTableRow,i=0;i<n.Headers.length;i++){if(n.Headers[i].Id==="email"){n.Headers[i].Hidden=!0;continue}else n.Headers[i].Hidden=!1;var u=new JTableColumn,ot=0,w=0,st=!0,f={},r=[];for(c=0;c<n.Headers[i].PossibleValues.length;c++)f[n.Headers[i].PossibleValues[c].Label]=0,r.push({key:n.Headers[i].PossibleValues[c].Label,total:0});if(n.Headers[i].Type.root("=>")==="rating")for(b=n.Headers[i].Type,b=b.split("=>")[1],k=JSON.parse(b),l=k.min;l<k.max;l+=k.step)f[l.toString()]=0,r.push({key:l.toString(),total:0});for(d=0;d<n.FilteredRows.length;d++)if(s=FindColumn(n.FilteredRows[d],n.Headers[i].Id),s!==null)switch(n.Headers[i].Type.root("=>")){case"itemParent":case"rating":e=s.PrettyValue;e=e.replace(/(<[^>]*>[^<]*<[^>]*>)/g,"");e=e.trim();typeof f[e]=="undefined"&&(f[e]=0,r.push({key:e,total:0}));f[e]++;w++;break;case"multipleSelection":for(a=JSON.parse(s.Value),g=[],h=0;h<a.length;h++){for(ft=!1,nt=0;nt<g.length;nt++)if(g[nt]===a[h]){ft=!0;break}if(ft)continue;else g.push(a[h]);for(ht=a[h],tt=null,v=0;v<n.Headers[i].PossibleValues.length;v++)n.Headers[i].PossibleValues[v].Id===ht&&(tt=n.Headers[i].PossibleValues[v]);tt!==null&&f[tt.Label]++}w++;break;case"boolean":s.Value==="1"?f.Yes++:f.No++;w++;break;case"number":ot+=parseFloat(s.Value);w++;break;default:st=!1}if(st){u.HeaderId=n.Headers[i].Id;u.Id=n.Headers[i].Id;u.Value=ot;u.PrettyValue=u.Value;var it="",ct=[],lt=[],at=[],y=-1,rt="<table><tbody>";switch(n.Headers[i].Type.root("=>")){case"multipleSelection":case"itemParent":case"rating":case"boolean":for(p=0;p<r.length;p++)r[p].total=f[r[p].key];for(n.Headers[i].Type.root("=>")!=="rating"&&r.sort(function(n,t){return t.total-n.total}),o=0;o<r.length;o++)y++,y>4&&(y=0),ct.push({value:f[r[o].key],color:graphColors[y].color,highlight:graphColors[y].highlight,label:r[o].key}),at.push(r[o].key),lt.push(f[r[o].key]),rt+='<tr><td style="text-align: right; padding-right: 3px; font-weight: bold;">'+r[o].key+":<\/td><td>"+f[r[o].key]+"<\/td><\/tr>";rt+="<\/tbody><\/table>";u.Value=rt;it=rt;n.Graph&&(n.Headers[i].Type==="multipleSelection"?(vt={labels:at,datasets:[{label:"Selections",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:lt}]},it='<div class="labeled-chart-container"><div class="canvas-holder"><canvas id="chart_'+u.Id+'" width="300" height="300"><\/canvas><\/div><div class="legend"><\/div><\/div>',t.push({id:"chart_"+u.Id,data:vt,type:"bar"})):(it='<div class="labeled-chart-container"><div class="canvas-holder"><canvas id="chart_'+u.Id+'" width="500" height="300"><\/canvas><\/div><div class="legend"><\/div><\/div>',t.push({id:"chart_"+u.Id,data:ct,type:"pie"})));u.PrettyValue=it;ut.Columns.push(u);break;case"number":ut.Columns.push(u);break;default:n.Headers[i].Hidden=!0}}else n.Headers[i].Hidden=!0}return et.push(ut),et};this.GetNormal=function(n,t){for(var r=[],u=0,i=t;i<n.FilteredRows.length;i++)if(r.push(n.FilteredRows[i]),u++,u>=n.RecordsPerPage)break;return r};this.UpdateRow=function(n,t,i){var r,o,u,f,e;if((!(n.Average||n.Graph||n.Count)||!n.Headers[u].Hidden)&&(r=$("#"+t.Id),r.length!==0)){for(typeof i!="boolean"&&(i=!1),(this.Options.type==="email"||this.Options.type==="invitation")&&(i=!0),o=r.css("background-color"),i||r.css("background-color","rgba(122,2,2,.5)"),u=0;u<n.Headers.length;u++)(f=r.find('td[data-headerid="'+n.Headers[u].Id+'"]'),f.length!==0)&&(e=FindColumn(t,n.Headers[u].Id),typeof e!="undefined"&&e!==null?f.html(e.PrettyValue):f.html(""));this.CreateLinks();this.OnUpdateComplete(r);i||setTimeout(function(){r.animate({backgroundColor:o},1e3,function(){r.css("background-color","")})},5e3)}};this.OnUpdateComplete=function(){};this.GenerateTableHtml=function(n,t){var r,u,f,h,i,o,s,e;for($('.jTable_parentName[data-jtable-target="'+this.Table+'"]').html(this.Parent),$('.jTable_name[data-jtable-target="'+this.Table+'"]').html(this.Name),r="<thead><tr>",u=0;u<n.Headers.length;u++)(n.Average||n.Graph||n.Count)&&n.Headers[u].Hidden||n.Headers[u].Removed||(f=n.Headers[u].Group,f=typeof f!="undefined"&&f!==null&&f!==""?"<i>"+f+"<\/i><br />":"",r+='<th class="" data-header-id="'+n.Headers[u].Id+'">'+f+n.Headers[u].Label+"<\/th>");for(r+="<\/tr><\/thead><tbody>",h=0;h<t.length;h++){for(r+='<tr id="'+t[h].Id+'">',i=0;i<n.Headers.length;i++)(n.Average||n.Graph||n.Count)&&n.Headers[i].Hidden||n.Headers[i].Removed||(o=n.Headers[i].Editable,(n.Average||n.Graph||n.Count)&&(o=!1),s=FindColumn(t[h],n.Headers[i].Id),typeof s!="undefined"&&s!==null?(o=o||s.Editable,e=s.PrettyValue,!this.Graph&&!this.Count&&!this.Average&&e!==null&&e.indexOf("<a")===-1&&e.length>100&&(e=e.substr(0,100)+"..."),r+='<td data-headerid="'+n.Headers[i].Id+'" id="'+s.Id+'" class="'+(o?"editable-item cursor-pointer":"")+'">'+e+"<\/td>"):r+='<td data-headerid="'+n.Headers[i].Id+'" class="'+(o?"editable-item cursor-pointer":"")+'"><\/td>');r+="<\/tr>"}return r+"<\/tbody>"};this.GetPrintView=function(n){var i,r,t,u;if(this.Filtered||this.Filter(),this.Sorted||this.Sort(),i=[],this.Count)i=this.GetCount(this,n);else if(this.Average)i=this.GetAverage(this,n);else if(this.Graph)i=this.GetGraph(this,n);else for(r=0;r<this.FilteredRows.length;r++)i.push(this.FilteredRows[r]);return t='<html><head><title>"'+this.Name+'"<\/title><script src="'+window.location.origin+'/Scripts/jquery-2.1.3.min.js"><\/script><script src="'+window.location.origin+'/Scripts/Chartv2.js"><\/script><link href="'+window.location.origin+'/Content/Bootstrap/bootstrap.min.css" rel="stylesheet" />',t+="<style> ",t+=".body { color: #3e3e3e; } ",t+=".report-header { position: fixed; left: 0; top: 0; width: 100%; height: 100px; overflow: hidden; padding: 10px 10px 0 10px; background: white; } ",t+="img.img-report-header { display: block; width: 100%; max-width: 250px; max-height: 75px; } ",t+=".report-title { text-align: right; } ",t+=".report-content { padding-top: 100px; } ",t+="table.table-full-page > thead > tr { border-top: 1px solid #ddd; } ",t+="table.table-full-page > thead > tr > th { padding-right: 50px !important; white-space: nowrap; min-width: 150px; background: white; font-size: 12px; } ",t+="table.table-full-page > tbody > tr { height: 75px; font-size: 12px; } ",t+="table.table-full-page > tbody > tr:last-child { border-bottom: 1px solid #ddd; } ",t+="table.table-full-page > tbody > tr:nth-child(even) > td { background: white; } ",t+="table.table-full-page td { padding: 0 0 0 0 !important; } ",t+=".cell-height { height: 75px; padding: 5px; overflow-y: auto; } ",t+="@media screen and (max-width: 1199px) { .report-header { position: relative; height: auto; overflow: visible; } ",t+=".report-title { text-align: left; padding-top: 15px; } ",t+=".report-content { padding-top: 15px; } ",t+="table.table-full-page > tbody > tr { height: auto; font-size: 12px; } ",t+=".cell-height { height: auto; max-height: 50px; padding: 5px; overflow-y: auto; } } ",t+="<\/style>",t+="<\/head><body>",t+='<div class="report-header"><div class="row"><div class="col-lg-3"><img class="img-report-header" src="https://toolkit.regstep.com/Images/Common/regstep.png"/><\/div>',t+='<div class="col-lg-9 report-title">'+(typeof this.Parent!="undefined"&&this.Parent!==null&&this.Parent!==""?"<h3>"+this.Parent+"<\/h3>":"")+"<h4>"+this.Name+"<\/h4>"+(typeof this.Description!="undefined"&&this.Description!==null&&this.Description!==""?"<h5>"+this.Description+"<\/h5>":"")+'<\/div><\/div><\/div><div class="report-content">',t+='<table class="table table-striped table-full-page">',t+=this.GenerateTableHtml(this,i),t+='<\/table><script type="text/javascript">\r\n',t+="//Render Charts\r\nChart.defaults.global.animation = false;\r\nchartData = "+JSON.stringify(n)+"\r\nfor (var i = 0; i < chartData.length; i++) {\r\n"+'    var template = "<ul class=\\"<%=name.toLowerCase()%>-legend\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\"background-color:<%=segments[i].fillColor%>\\"><\/span><%if(segments[i].label){%><b><%=segments[i].label%><\/b>: <%=+(Math.round(((segments[i].value / total) * 100) + \'e+2\')  + \'e-2\')%>%<%}%><\/li><%}%><\/ul>";\r\n'+"    if (this.Count) {\r\n"+'        var template = "<ul class=\\"<%=name.toLowerCase()%>-legend\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\"background-color:<%=segments[i].fillColor%>\\"><\/span><%if(segments[i].label){%><b><%=segments[i].label%><\/b>: <%=segments[i].value%><%}%><\/li><%}%><\/ul>";\r\n'+"    }\r\n    switch (chartData[i].type) {\r\n        case 'pie':\r\n            var ctx = $('#' + chartData[i].id).get(0).getContext('2d');\r\n            var chart = new Chart(ctx).Pie(chartData[i].data, {\r\n                legendTemplate: template\r\n            });\r\n            var legend = chart.generateLegend();\r\n            $('#' + chartData[i].id).parent().parent().children('.legend').html(legend);\r\n            break;\r\n        case 'bar':\r\n            var step = 10;\r\n            var max = 100;\r\n            var start = 100;\r\n            var options = {};\r\n            var data = chartData[i].data;\r\n            if (this.Count) {\r\n                for (var j = 0; j < data.datasets[0].data.length; j++) {\r\n                    if (max < data.datasets[0].data[j]) {\r\n                        max = data.datasets[0].data[j];\r\n                    }\r\n                    if (start > data.datasets[0].data[j]) {\r\n                        start = data.datasets[0].data[j];\r\n                    }\r\n                }\r\n                start = (start - 10) - (start % 10);\r\n                if (start < 0) {\r\n                    start = 0;\r\n                }\r\n            } else {\r\n                start = 0;\r\n            }\r\n            options.scaleOverride = true;\r\n            options.scaleSteps = Math.ceil((max - start) / step);\r\n            options.scaleStepWidth = step;\r\n            options.scaleStartValue = start;\r\n            var ctx = $('#' + chartData[i].id).get(0).getContext('2d');\r\n            var chart = new Chart(ctx).Bar(chartData[i].data, options);\r\n            break;\r\n    }\r\n}\r\nsetInterval(function () { window.print(); }, 500);",t+="<\/script><\/body><\/html>",u=window.open("about:blank","","_blank"),u.document.write(t),t};this.Load=function(n,t){var f,u,r;t===null&&(t={});f="jTable: ";u="";typeof t.id!="undefined"&&t.id!==null&&(u+="?id="+t.id,f+=t.id);typeof t.type!="undefined"&&t.type!==null&&t.type!==""&&(u+="&type="+t.type,f+="_"+t.type);r=new XMLHttpRequest;r.addEventListener("progress",this.UpdateProgress,!1);n+=u;r.open("get",n,!0);RESTFUL.ajaxHeader(r);r.onload=function(n){var u=n.currentTarget,r,t;u.status===200?(r=RESTFUL.parse(u),t=r.Table,r.Success?(i.Filters=t.Filters,i.Sortings=t.Sortings,i.Rows=t.Rows,i.Count=t.Count,i.Graph=t.Graph,i.Average=t.Average,i.Description=t.Description,i.Name=t.Name,i.Parent=t.Parent,i.Favorite=t.Favorite,i.Headers=t.Headers,i.Id=t.Id,i.Options=t.Options,i.Page=1,i.RecordsPerPage=t.RecordsPerPage,i.TotalRecords=t.TotalRecords,i.SavedId=t.SavedId,i.LastFullCheck=moment(),i.UpdateView(i),i.AfterLoad(i),i.Filter(),i.GetPage(),i.SavedId!==null?$(".jTable_standardOnly").hide():$(".jTable_standardOnly").show()):RESTFUL.showError("Failed to load data.","Unhandled Exception")):RESTFUL.showError("Failed to load data.","Unhandled Exception");prettyProcessing.hidePleaseWait()};r.onerror=function(){RESTFUL.showError();prettyProcessing.hidePleaseWait()};prettyProcessing.showPleaseWait("Requesting Data","Requesting data from the server.");r.send()};this.UpdateProgress=function(n){if(n.lengthComputable){var t=n.loaded/n.total*100;prettyProcessing.update("Downloading Data","Downloading the data from the server.",t)}else prettyProcessing.update("Downloading Data","Downloading the data from the server.",100)};this.AfterLoad=function(n){typeof BREADCRUMB_VERSION!="undefined"&&BREADCRUMB_CURRENT!==null&&(BREADCRUMB_CURRENT.Label=n.Name+" on "+n.Parent,UpdateCrumb(BREADCRUMB_CURRENT))};this.UpdateView=function(){$('.jTable_parentName[data-jtable-target="'+this.Table+'"]').html(this.Parent);$('.jTable_name[data-jtable-target="'+this.Table+'"]').html(this.Name);$('.jTable_recordsPerPage[data-jtable-target="'+this.Table+'"]').val(this.RecordsPerPage);$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"]').html("");this.Filter();this.Sort();for(var n=0;n<this.TotalPages();n++)$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"]').append('<option value="'+(n+1)+'" '+(this.Page===n+1?'selected="selected"':"")+">"+(n+1)+"<\/option>");$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"] > option').prop("selected",!1);$('.jTable_pageSelect[data-jtable-target="'+this.Table+'"] > option[value="'+this.Page+'"]').prop("selected",!0);this.SavedId===null||this.SavedId===""||typeof this.SavedId=="undefined"?$('.jTable_standarOnly[data-jtable-target="'+this.Table+'"]').show():$('.jTable_standardOnly[data-jtable-target="'+this.Table+'"]').hide();this.Favorite?$('.jTable_favorite[data-jtable-target="'+this.Table+'"]').html('<span class="glyphicon glyphicon-star glyphicon-small"><\/span> Un-Favorite'):$('.jTable_favorite[data-jtable-target="'+this.Table+'"]').html('<span class="glyphicon glyphicon-star-empty glyphicon-small"><\/span> Favorite');this.SortingObject.Generate();this.FilterObject.Generate()};this.GetAjaxData=function(){var n={};return n.FilteredRows=[],n.Rows=[],n.Filters=this.Filters,n.Sortings=this.Sortings,n.Id=this.Id,n.SavedId=this.SavedId,n.Count=this.Count,n.Graph=this.Graph,n.Average=this.Average,n.Name=this.Name,n.Description=this.Description,n.Options=this.Options,n.Headers=this.Headers,n.Favorite=this.Favorite,n.Parent=this.Parent,n}}function JTableSorting(){"use strict";this.ActingOn="";this.Ascending=!0;this.Order=1}function JTableFilter(){"use strict";this.ActingOn="";this.Test="==";this.Value="";this.Order=1;this.Link=null;this.GroupNext=!1;this.CaseSensitive=!1}function JTableHeader(){"use strict";this.Label="";this.Id="";this.Order=1;this.Hidden=!1;this.Group="";this.Type="text";this.PossibleValues=[];this.Editable=!1;this.Removed=!1;this.SortByPretty=!1}function JTableHeaderPossibleValue(){"use strict";this.Id="";this.Label=""}function JTableRow(){"use strict";this.Id="";this.Columns=[];this.Order=1;this.PreviousSort=0}function JTableColumn(){"use strict";this.HeaderId="";this.PrettyValue="";this.Id="";this.Value="";this.Editable=!0}function TestValue(n,t,i,r){"use strict";var e=r.Type,u="",o=!1,a,v,s,h,c,l,f;if(n.Value===null&&(n.Value=""),t===null&&(t=""),e==="string"||e==="text")switch(i){case"==":return n.Value.toLowerCase()===t.toLowerCase();case"!=":return n.Value.toLowerCase()!==t.toLowerCase();case">":return n.Value.length>parseInt(t);case">=":return n.Value.length>=parseInt(t);case"<":return n.Value.lenth<parseInt(t);case"<=":return n.Value.length<=parseInt(t);case"*=":return n.Value.toLowerCase().indexOf(t)!==-1;case"!*=":return n.Value.toLowerCase().indexOf(t)===-1;case"^=":return n.Value.toLowerCase().indexOf(t)===0;case"!^=":return n.Value.toLowerCase().indexOf(t)!==0;case"$=":return n.Value.toLowerCase().indexOf(t,n.Value.length-t.length)!==-1;case"!$=":return n.Value.toLowerCase().indexOf(t,n.Value.length-t.length)===-1;case"=rgx=":return a=new RegExp(t,"i"),a.test(n.Value);case"!=rgx=":return v=new RegExp(t,"i"),!v.test(n.Value)}else if(e==="number"||e.indexOf("rating")===0){u=parseFloat(n.Value);s=parseFloat(t);switch(i){case"==":return u===s;case"!=":return u!==s;case">":return u>s;case">=":return u>=s;case"<":return u<s;case"<=":return u<=s}}else if(e==="multipleSelection"){u=JSON.parse(n.Value);o=!1;switch(i){case"==":return u.length===1&&u[0]===t;case"!=":for(h=0;h<u.length;h++)if(u[h]===t){o=!0;break}return!o;case"in":for(c=0;c<u.length;c++)if(u[c]===t){o=!0;break}return o;case"notin":for(l=0;l<u.length;l++)if(u[l]===t){o=!0;break}return!o}}else if(e==="itemParent"){o=!1;switch(i){case"==":return n.Value===t;case"!=":return n.Value!==t}}else if(e==="date"){u=moment(n.Value);f=moment(t);switch(i){case"==":return u.isSame(f);case"!=":return!u.isSame(f);case">":return u.isAfter(f);case">=":return u.isSame(f)||u.isAfter(f);case"<":return u.isBefore(f);case"<=":return u.isSame(f)||u.isBefore(f)}}else if(e==="boolean")switch(i){case"==":return n.Value===t;case"!=":return n.Value!==t}return!1}function ReplaceRow(n,t){"use strict";for(var i=0;i<n.Rows.length;i++)if(n.Rows[i].Id===t.Id)return n.Rows[i]=t,!0;return n.Rows.push(t),!1}function ReplaceHeader(n,t){"use strict";for(var i=0;i<n.Headers.length;i++)if(n.Headers[i].Id===t.Id){n.Headers[i]=t;return}n.Headers.push(t)}function FindColumn(n,t){"use strict";for(var i=0;i<n.Columns.length;i++)if(n.Columns[i].HeaderId===t)return n.Columns[i];return null}function FindRow(n,t){"use strict";for(var i=0;i<n.Rows.length;i++)if(n.Rows[i].Id===t)return n.Rows[i];return null}function FindHeader(n,t){"use strict";for(var i=0;i<n.Headers.length;i++)if(n.Headers[i].Id===t)return n.Headers[i];return null}function GenerateHeaderDiv(n,t){"use strict";var r=$(window).innerHeight(),i;return r*=.72,i='<div class="modal fade" id="'+n+'" data-jtable-target="'+t+'"><div class="modal-dialog modal-fill"><div class="modal-header"><h3 class="modal-title">Report Fields<\/h3><\/div>',i+='<div class="modal-body" style="max-height: '+r+'px;"><div class="row"><div class="col-md-5 header-selection-window"><div class="headers-container headers-available"><div class="headers-title">Available Fields<\/div><div class="headers-container-available"><\/div><\/div><\/div>',i+='<div class="col-md-2 header-selection-buttons"><div class="headers-commands"><a href="#" class="add-header">Add <span class="glyphicon glyphicon-chevron-right glyphicon-small"><\/span><\/a><br /><br /><a href="#" class="remove-header"><span class="glyphicon glyphicon-chevron-left glyphicon-small"><\/span><\/span> Remove<\/a><\/div><\/div>',i+='<div class="col-md-5 header-selection-window"><div class="headers-container headers-selected"><div class="headers-title">Included Fields<\/div><div class="headers-container-selected"><\/div><\/div><\/div>',i+="<\/div><\/div>",i+'<div class="modal-footer"><button type="button" class="btn btn-default headers-set">Set<\/button><\/div><\/div><\/div>'}function CheckForUpdates(n){for(var r,t,u={id:n.Id,savedId:n.SavedId,options:n.Options,items:[],lastFullCheck:n.LastFullCheck.format()},i=0;i<n.Rows.length;i++)r=FindColumn(n.Rows[i],"modificationToken"),r!==null&&u.items.push({id:n.Rows[i].Id,token:r.Value});t=new XMLHttpRequest;t.open("post",window.location.origin+"/SystemAdministration/LogUpdates",!0);t.onload=function(t){var e=t.currentTarget,i,u,f,o,r;if(e.status===200)if(i=RESTFUL.parse(e),i.action==="expired")n.DeleteStore(n),n.Load(window.location.origin+"/SystemAdministration/Logs",TABLE_options);else{if(/rows/.test(i.action))for(r=0;r<i.rows.length;r++)u=i.rows[r],ReplaceRow(n,u),n.UpdateRow(n,u);if(/headers/.test(i.action)){for(f=0;f<i.headers.length;f++)o=i.headers[f],ReplaceHeader(n,o);n.GetPage()}for(n.Filter(),n.FilteredRecords()<n.RecordsPerPage&&n.GetPage(),r=0;r<i.rows.length;r++)n.UpdateRow(n,u)}setTimeout(function(){CheckForUpdates(n)},3e4)};RESTFUL.ajaxHeader(t);RESTFUL.jsonHeader(t);t.send(JSON.stringify(AddJsonAntiForgeryToken(u)))}function UpdateBreadCrumb(n){if(BREADCRUMB.CURRENT===null){setTimeout(function(){UpdateBreadCrumb(n)},5e3);return}BREADCRUMB.CURRENT.Label=n.Name+" on "+n.Parent;UpdateCrumb(BREADCRUMB.CURRENT)}var advSorting={Version:new Version(1,1,0,0),Description:"Allows advance sorting behaviors",SortFunction:function(n){var t,i,u,f,r;if(!Array.isArray(n)||n.length<2)return advSorting.NaturalSort;for(t=Math.floor(n.length/5),t<2&&(t=2),t>50&&(t=50),i=null,u=0;u<t;u++)(f=Math.floor(Math.random()*n.length),r=n[f],typeof r=="string")&&(i=i===null?/^[a-fA-F0-9]*$/.test(r):i&&/^[a-fA-F0-9]*$/.test(r));return i?advSorting.HexSort:advSorting.NaturalSort},SmartSort:function(n,t){var i,r,f,e,u;if(!Array.isArray(n)||n.length<2)return[];for(typeof t!="boolean"&&(t=!0),i=Math.floor(n.length/5),i<2&&(i=2),i>50&&(i=50),r=null,f=0;f<i;f++)(e=Math.floor(Math.random()*n.length),u=n[e],typeof u=="string")&&(r=r===null?/^[a-fA-F0-9]*$/.test(u):r&&/^[a-fA-F0-9]*$/.test(u));return r?n.sort(function(n,i){return advSorting.HexSort(n,i,t)}):n.sort(function(n,i){return advSorting.NaturalSort(n,i,t)}),n},HexSort:function(n,t,i){if(typeof i!="boolean"&&(i=!0),typeof n!=typeof t)return-1;if((typeof n=="undefined"||n===null)&&(typeof t!="undefined"||t!==null))return 1;if((typeof t=="undefined"||t===null)&&(typeof n!="undefined"||n!==null))return-1;if((typeof n=="undefined"||n===null)&&(typeof t=="undefined"||t===null))return 0;if(typeof n=="string"){var r=parseInt(n,16),u=parseInt(t,16);return isNaN(r)&&!isNaN(u)?1:isNaN(u)&&!isNaN(r)?-1:isNaN(r)&&isNaN(u)?0:r-u}return n-t},NaturalSort:function(n,t,i){var s,h,u,f,r,e;if(typeof i!="boolean"&&(i=!0),(typeof n=="undefined"||n===null||n==="")&&(typeof t!="undefined"||t!==null||t===""))return 1;if((typeof t=="undefined"||t===null||t==="")&&(typeof n!="undefined"||n!==null||n===""))return-1;if((typeof n=="undefined"||n===null||n==="")&&(typeof t=="undefined"||t===null||t===""))return 1;if(typeof n!=typeof t)return-1;if(typeof n=="number"&&typeof t=="number")return i?n-t:t-n;if(typeof n=="string"){if(!isNaN(n)&&!isNaN(t))return s=parseFloat(n),h=parseFloat(t),i?s-h:h-s;n=n.toLowerCase();t=t.toLowerCase();for(var c=0,l=0,o=n.length,a=t.length;c<o&&l<t.length;){if(u=this.getChunk(n,o,c),c+=u.length,f=this.getChunk(t,a,l),l+=f.length,r=0,this.isDigit(u)&&this.isDigit(f)){if(r=u.length-f.length,r===0)for(e=0;e<u.length;e++)if(r=u.charCodeAt(e)-f.charCodeAt(e),r!==0)return i?r:r*-1}else r=u.localeCompare(f);if(r!==0)return i?r:r*-1}return i?o-a:a-o}return i?n.length-t.length:n.length-t.length},getChunk:function(n,t,i){var u="",r=n.charAt(i);if(u+=r,i++,this.isDigit(r))while(i<t){if(r=n.charAt(i),!this.isDigit(r))break;u+=r;i++}else while(i<t){if(r=n.charAt(i),this.isDigit(r))break;u+=r;i++}return u},isDigit:function(n){return typeof n=="number"?!0:typeof n!="string"?!1:n.length<1?!1:n.charCodeAt(0)>=48&&n.charCodeAt(0)<=57}},SORTING_VERSION,SORTING_modalIndex,JTables,graphColors;
/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 3.3.0
 *
 * A simple yet powerful JQuery star rating plugin that allows rendering
 * fractional star ratings and supports Right to Left (RTL) input.
 * 
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
(function(n){var f=0,e=5,i=.5,o="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,t=function(t,i){return typeof t=="undefined"||t===null||t===undefined||t==[]||t===""||i&&n.trim(t)===""},r=function(n,i,r){var u=t(n.data(i))?n.attr(i):n.data(i);return u?u:r[i]},s=function(n){var t=(""+n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},h=function(n,t){return parseFloat(n.toFixed(t))},u=function(t,i){this.$element=n(t);this.init(i)};u.prototype={constructor:u,_parseAttr:function(n,u){var l=this,s=l.$element,h,o,c;return s.attr("type")==="range"||s.attr("type")==="number"?(h=r(s,n,u),o=i,n==="min"?o=f:n==="max"?o=e:n==="step"&&(o=i),c=t(h)?o:h,parseFloat(c)):parseFloat(u[n])},listen:function(){var t=this;t.initTouch();t.$rating.on("click",function(n){if(!t.inactive){var i=n.pageX-t.$rating.offset().left;t.setStars(i);t.$element.trigger("change");t.$element.trigger("rating.change",[t.$element.val(),t.$caption.html()]);t.starClicked=!0}});t.$rating.on("mousemove",function(n){if(t.hoverEnabled&&!t.inactive){t.starClicked=!1;var r=n.pageX-t.$rating.offset().left,i=t.calculate(r);t.toggleHover(i);t.$element.trigger("rating.hover",[i.val,i.caption,"stars"])}});t.$rating.on("mouseleave",function(){if(t.hoverEnabled&&!t.inactive&&!t.starClicked){var n=t.cache;t.toggleHover(n);t.$element.trigger("rating.hoverleave",["stars"])}});t.$clear.on("mousemove",function(){if(t.hoverEnabled&&!t.inactive&&t.hoverOnClear){t.clearClicked=!1;var i='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"<\/span>",n=t.clearValue,u=t.getWidthFromValue(n),r;r={caption:i,width:u,val:n};t.toggleHover(r);t.$element.trigger("rating.hover",[n,i,"clear"])}});t.$clear.on("mouseleave",function(){if(t.hoverEnabled&&!t.inactive&&!t.clearClicked&&t.hoverOnClear){var n=t.cache;t.toggleHover(n);t.$element.trigger("rating.hoverleave",["clear"])}});t.$clear.on("click",function(){t.inactive||(t.clear(),t.clearClicked=!0)});n(t.$element[0].form).on("reset",function(){t.inactive||t.reset()})},destroy:function(){var i=this,r=i.$element;t(i.$container)||i.$container.before(r).remove();n.removeData(r.get(0));r.off("rating").removeClass("hide")},create:function(){var n=arguments.length>0?arguments[0]:{},t=self.$element;self.destroy();t.rating(n)},setTouch:function(n,t){var i=this;if(o&&!i.inactive){var u=n.originalEvent,s=u.touches.length>0?u.touches:u.changedTouches,f=s[0].pageX-i.$rating.offset().left;if(t===!0)i.setStars(f),i.$element.trigger("change"),i.$element.trigger("rating.change",[i.$element.val(),i.$caption.html()]),i.starClicked=!0;else{var r=i.calculate(f),h=r.val<=i.clearValue?i.fetchCaption(i.clearValue):r.caption,e=i.getWidthFromValue(i.clearValue),c=r.val<=i.clearValue?i.rtl?100-e+"%":e+"%":r.width;i.$caption.html(h);i.$stars.css("width",c)}}},initTouch:function(){var n=this;n.$rating.on("touchstart",function(t){n.setTouch(t,!1)});n.$rating.on("touchmove",function(t){n.setTouch(t,!1)});n.$rating.on("touchend",function(t){n.setTouch(t,!0)})},initSlider:function(n){var r=this;t(r.$element.val())&&r.$element.val(0);r.initialValue=r.$element.val();r.min=typeof n.min!="undefined"?n.min:r._parseAttr("min",n);r.max=typeof n.max!="undefined"?n.max:r._parseAttr("max",n);r.step=typeof n.step!="undefined"?n.step:r._parseAttr("step",n);(isNaN(r.min)||t(r.min))&&(r.min=f);(isNaN(r.max)||t(r.max))&&(r.max=e);(isNaN(r.step)||t(r.step)||r.step==0)&&(r.step=i);r.diff=r.max-r.min},init:function(i){var r=this,u;r.options=i;r.hoverEnabled=i.hoverEnabled;r.hoverChangeCaption=i.hoverChangeCaption;r.hoverChangeStars=i.hoverChangeStars;r.hoverOnClear=i.hoverOnClear;r.starClicked=!1;r.clearClicked=!1;r.initSlider(i);r.checkDisabled();$element=r.$element;r.containerClass=i.containerClass;r.glyphicon=i.glyphicon;u=r.glyphicon?"":"★";r.symbol=t(i.symbol)?u:i.symbol;r.rtl=i.rtl||r.$element.attr("dir");r.rtl&&r.$element.attr("dir","rtl");r.showClear=i.showClear;r.showCaption=i.showCaption;r.size=i.size;r.stars=i.stars;r.defaultCaption=i.defaultCaption;r.starCaptions=i.starCaptions;r.starCaptionClasses=i.starCaptionClasses;r.clearButton=i.clearButton;r.clearButtonTitle=i.clearButtonTitle;r.clearButtonBaseClass=t(i.clearButtonBaseClass)?"clear-rating":i.clearButtonBaseClass;r.clearButtonActiveClass=t(i.clearButtonActiveClass)?"clear-rating-active":i.clearButtonActiveClass;r.clearCaption=i.clearCaption;r.clearCaptionClass=i.clearCaptionClass;r.clearValue=t(i.clearValue)?r.min:i.clearValue;r.$element.removeClass("form-control").addClass("form-control");r.$clearElement=t(i.clearElement)?null:n(i.clearElement);r.$captionElement=t(i.captionElement)?null:n(i.captionElement);typeof r.$rating=="undefined"&&typeof r.$container=="undefined"&&(r.$rating=n(document.createElement("div")).html('<div class="rating-stars"><\/div>'),r.$container=n(document.createElement("div")),r.$container.before(r.$rating),r.$container.append(r.$rating),r.$element.before(r.$container).appendTo(r.$rating));r.$stars=r.$rating.find(".rating-stars");r.generateRating();r.$clear=t(r.$clearElement)?r.$container.find("."+r.clearButtonBaseClass):r.$clearElement;r.$caption=t(r.$captionElement)?r.$container.find(".caption"):r.$captionElement;r.setStars();r.$element.removeClass("hide").addClass("hide");r.listen();r.showClear&&r.$clear.attr({"class":r.getClearClass()});r.cache={caption:r.$caption.html(),width:r.$stars.width(),val:r.$element.val()};r.$element.removeClass("rating-loading")},checkDisabled:function(){var n=this;n.disabled=r(n.$element,"disabled",n.options);n.readonly=r(n.$element,"readonly",n.options);n.inactive=n.disabled||n.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var n=this,r=n.renderClear(),u=n.renderCaption(),i=n.rtl?"rating-container-rtl":"rating-container",f=n.getStars();i+=n.glyphicon?n.symbol==""?" rating-gly-star":" rating-gly":" rating-uni";n.$rating.attr("class",i);n.$rating.attr("data-content",f);n.$stars.attr("data-content",f);i=n.rtl?"star-rating-rtl":"star-rating";n.$container.attr("class",i+" rating-"+n.size);n.inactive?n.$container.removeClass("rating-active").addClass("rating-disabled"):n.$container.removeClass("rating-disabled").addClass("rating-active");typeof n.$caption=="undefined"&&typeof n.$clear=="undefined"&&(n.rtl?n.$container.prepend(u).append(r):n.$container.prepend(r).append(u));t(n.containerClass)||n.$container.removeClass(n.containerClass).addClass(n.containerClass)},getStars:function(){for(var n=this,r=n.stars,t="",i=1;i<=r;i++)t+=n.symbol;return t},renderClear:function(){var n=this,i;return n.showClear?(i=n.getClearClass(),!t(n.$clearElement))?(n.$clearElement.removeClass(i).addClass(i).attr({title:n.clearButtonTitle}),n.$clearElement.html(n.clearButton),""):'<div class="'+i+'" title="'+n.clearButtonTitle+'">'+n.clearButton+"<\/div>":""},renderCaption:function(){var n=this,r=n.$element.val(),i;return n.showCaption?(i=n.fetchCaption(r),!t(n.$captionElement))?(n.$captionElement.removeClass("caption").addClass("caption").attr({title:n.clearCaption}),n.$captionElement.html(i),""):'<div class="caption">'+i+"<\/div>":""},fetchCaption:function(n){var i=this,r=parseFloat(n),u,f,e;return u=typeof i.starCaptionClasses=="function"?t(i.starCaptionClasses(r))?i.clearCaptionClass:i.starCaptionClasses(r):t(i.starCaptionClasses[r])?i.clearCaptionClass:i.starCaptionClasses[r],f=typeof i.starCaptions=="function"?t(i.starCaptions(r))?i.defaultCaption.replace(/\{rating\}/g,r):i.starCaptions(r):t(i.starCaptions[r])?i.defaultCaption.replace(/\{rating\}/g,r):i.starCaptions[r],e=r==i.clearValue?i.clearCaption:f,'<span class="'+u+'">'+e+"<\/span>"},getWidthFromValue:function(n){var i=this,t=i.min,r=i.max,u=i.step;return n<=t||t==r?0:n>=r?100:(n-t)*100/(r-t)},getValueFromPosition:function(n){var t=this,u=s(t.step),i,r,f=t.$rating.width();return r=t.diff*n/(f*t.step),r=t.rtl?Math.floor(r):Math.ceil(r),i=h(parseFloat(t.min+r*t.step),u),i=Math.max(Math.min(i,t.max),t.min),t.rtl?t.max-i:i},toggleHover:function(n){var t=this,r,i,u;t.hoverChangeCaption&&(r=n.val<=t.clearValue?t.fetchCaption(t.clearValue):n.caption,t.$caption.html(r));t.hoverChangeStars&&(i=t.getWidthFromValue(t.clearValue),u=n.val<=t.clearValue?t.rtl?100-i+"%":i+"%":n.width,t.$stars.css("width",u))},calculate:function(n){var i=this,f=t(i.$element.val())?0:i.$element.val(),u=arguments.length?i.getValueFromPosition(n):f,e=i.fetchCaption(u),r=i.getWidthFromValue(u);return i.rtl&&(r=100-r),r+="%",{caption:e,width:r,val:u}},setStars:function(n){var t=this,i=arguments.length?t.calculate(n):t.calculate();t.$element.val(i.val);t.$stars.css("width",i.width);t.$caption.html(i.caption);t.cache=i},clear:function(){var n=this,t='<span class="'+n.clearCaptionClass+'">'+n.clearCaption+"<\/span>";n.$stars.removeClass("rated");n.inactive||n.$caption.html(t);n.$element.val(n.clearValue);n.setStars();n.$element.trigger("rating.clear")},reset:function(){var n=this;n.$element.val(n.initialValue);n.setStars();n.$element.trigger("rating.reset")},update:function(n){var t=this;arguments.length&&(t.$element.val(n),t.setStars())},refresh:function(t){var i=this;arguments.length&&(i.$rating.off("rating"),i.$clear.off(),i.init(n.extend(i.options,t)),i.showClear?i.$clear.show():i.$clear.hide(),i.showCaption?i.$caption.show():i.$caption.hide(),i.$element.trigger("rating.refresh"))}};n.fn.rating=function(t){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var f=n(this),r=f.data("rating"),e=typeof t=="object"&&t;r||f.data("rating",r=new u(this,n.extend({},n.fn.rating.defaults,e,n(this).data())));typeof t=="string"&&r[t].apply(r,i)})};n.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,disabled:!1,readonly:!1,rtl:!1,size:"sm",showClear:!1,showCaption:!1,defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"><\/i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Not Rated",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0};n("input.rating").addClass("rating-loading");n(document).ready(function(){var t=n("input.rating"),i=Object.keys(t).length;i>0&&t.rating()})})(jQuery);
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.1-beta.4
 *
 * Copyright 2014 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function(){"use strict";var h=this,g=h.Chart,t=function(t){var u=this,i,r;return this.canvas=t.canvas,this.ctx=t,i=this.width=t.canvas.width,r=this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};t.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}};t.types={};var n=t.helpers={},i=n.each=function(n,t,i){var f=Array.prototype.slice.call(arguments,3),r,u;if(n)if(n.length===+n.length)for(r=0;r<n.length;r++)t.apply(i,[n[r],r].concat(f));else for(u in n)t.apply(i,[n[u],u].concat(f))},l=n.clone=function(n){var t={};return i(n,function(i,r){n.hasOwnProperty(r)&&(t[r]=i)}),t},r=n.extend=function(n){return i(Array.prototype.slice.call(arguments,1),function(t){i(t,function(i,r){t.hasOwnProperty(r)&&(n[r]=i)})}),n},nt=n.merge=function(){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),r.apply(null,n)},tt=n.indexOf=function(n,t){if(Array.prototype.indexOf)return n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1},vt=n.where=function(t,i){var r=[];return n.each(t,function(n){i(n)&&r.push(n)}),r},yt=n.findNextWhere=function(n,t,i){var r,u;for(i||(i=-1),r=i+1;r<n.length;r++)if(u=n[r],t(u))return u},pt=n.findPreviousWhere=function(n,t,i){var r,u;for(i||(i=n.length),r=i-1;r>=0;r--)if(u=n[r],t(u))return u},p=n.inherits=function(n){var i=this,t=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return i.apply(this,arguments)},u=function(){this.constructor=t};return u.prototype=i.prototype,t.prototype=new u,t.extend=p,n&&r(t.prototype,n),t.__super__=i.prototype,t},a=n.noop=function(){},it=n.uid=function(){var n=0;return function(){return"chart-"+n++}}(),rt=n.warn=function(n){window.console&&typeof window.console.warn=="function"&&console.warn(n)},ut=n.amd=typeof define=="function"&&define.amd,u=n.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},c=n.max=function(n){return Math.max.apply(Math,n)},o=n.min=function(n){return Math.min.apply(Math,n)},wt=n.cap=function(n,t,i){if(u(t)){if(n>t)return t}else if(u(i)&&n<i)return i;return n},w=n.getDecimalPlaces=function(n){return n%1!=0&&u(n)?n.toString().split(".")[1].length:0},v=n.radians=function(n){return n*(Math.PI/180)},bt=n.getAngleFromPoint=function(n,t){var i=t.x-n.x,r=t.y-n.y,f=Math.sqrt(i*i+r*r),u=Math.PI*2+Math.atan2(r,i);return i<0&&r<0&&(u+=Math.PI*2),{angle:u,distance:f}},b=n.aliasPixel=function(n){return n%2==0?0:.5},kt=n.splineCurve=function(n,t,i,r){var u=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),f=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),e=r*u/(u+f),o=r*f/(u+f);return{inner:{x:t.x-e*(i.x-n.x),y:t.y-e*(i.y-n.y)},outer:{x:t.x+o*(i.x-n.x),y:t.y+o*(i.y-n.y)}}},ft=n.calculateOrderOfMagnitude=function(n){return Math.floor(Math.log(n)/Math.LN10)},dt=n.calculateScaleRange=function(n,t,i,r,u){var w=2,v=Math.floor(t/(i*1.5)),y=w>=v,h=c(n),l=o(n);h===l&&(h+=.5,l>=.5&&!r?l-=.5:h+=.5);for(var b=Math.abs(h-l),s=ft(b),k=Math.ceil(h/(1*Math.pow(10,s)))*Math.pow(10,s),p=r?0:Math.floor(l/(1*Math.pow(10,s)))*Math.pow(10,s),a=k-p,f=Math.pow(10,s),e=Math.round(a/f);(e>v||e*2<v)&&!y;)if(e>v)f*=2,e=Math.round(a/f),e%1!=0&&(y=!0);else if(u&&s>=0)if(f/2%1==0)f/=2,e=Math.round(a/f);else break;else f/=2,e=Math.round(a/f);return y&&(e=w,f=a/e),{steps:e,stepValue:f,min:p,max:p+e*f}},f=n.template=function(n,t){function r(n,t){var r=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[n]=i[n];return t?r(t):r}if(n instanceof Function)return n(t);var i={};return r(n,t)},gt=n.generateLabels=function(n,t,r,u){var e=new Array(t);return labelTemplateString&&i(e,function(t,i){e[i]=f(n,{value:r+u*(i+1)})}),e},s=n.easingEffects={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return-1*n*(n-2)},easeInOutQuad:function(n){return(n/=1/2)<1?1/2*n*n:-1/2*(--n*(n-2)-1)},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1*((n=n/1-1)*n*n+1)},easeInOutCubic:function(n){return(n/=1/2)<1?1/2*n*n*n:1/2*((n-=2)*n*n+2)},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return-1*((n=n/1-1)*n*n*n-1)},easeInOutQuart:function(n){return(n/=1/2)<1?1/2*n*n*n*n:-1/2*((n-=2)*n*n*n-2)},easeInQuint:function(n){return 1*(n/=1)*n*n*n*n},easeOutQuint:function(n){return 1*((n=n/1-1)*n*n*n*n+1)},easeInOutQuint:function(n){return(n/=1/2)<1?1/2*n*n*n*n*n:1/2*((n-=2)*n*n*n*n+2)},easeInSine:function(n){return-1*Math.cos(n/1*(Math.PI/2))+1},easeOutSine:function(n){return 1*Math.sin(n/1*(Math.PI/2))},easeInOutSine:function(n){return-1/2*(Math.cos(Math.PI*n/1)-1)},easeInExpo:function(n){return n===0?1:1*Math.pow(2,10*(n/1-1))},easeOutExpo:function(n){return n===1?1:1*(-Math.pow(2,-10*n)+1)},easeInOutExpo:function(n){return n===0?0:n===1?1:(n/=1/2)<1?1/2*Math.pow(2,10*(n-1)):1/2*(-Math.pow(2,-10*--n)+2)},easeInCirc:function(n){return n>=1?n:-1*(Math.sqrt(1-(n/=1)*n)-1)},easeOutCirc:function(n){return 1*Math.sqrt(1-(n=n/1-1)*n)},easeInOutCirc:function(n){return(n/=1/2)<1?-1/2*(Math.sqrt(1-n*n)-1):1/2*(Math.sqrt(1-(n-=2)*n)+1)},easeInElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1)==1?1:(t||(t=1*.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)))},easeOutElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1)==1?1:(t||(t=1*.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*n)*Math.sin((n*1-r)*2*Math.PI/t)+1)},easeInOutElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1/2)==2?1:(t||(t=1*.3*1.5),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),n<1)?-.5*i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t):i*Math.pow(2,-10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)*.5+1},easeInBack:function(n){var t=1.70158;return 1*(n/=1)*n*((t+1)*n-t)},easeOutBack:function(n){var t=1.70158;return 1*((n=n/1-1)*n*((t+1)*n+t)+1)},easeInOutBack:function(n){var t=1.70158;return(n/=1/2)<1?1/2*n*n*(((t*=1.525)+1)*n-t):1/2*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:function(n){return 1-s.easeOutBounce(1-n)},easeOutBounce:function(n){return(n/=1)<1/2.75?1*7.5625*n*n:n<2/2.75?1*(7.5625*(n-=1.5/2.75)*n+.75):n<2.5/2.75?1*(7.5625*(n-=2.25/2.75)*n+.9375):1*(7.5625*(n-=2.625/2.75)*n+.984375)},easeInOutBounce:function(n){return n<1/2?s.easeInBounce(n*2)*.5:s.easeOutBounce(n*2-1)*.5+1*.5}},k=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)}}(),ni=n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(n){return window.clearTimeout(n,1e3/60)}}(),ti=n.animationLoop=function(n,t,i,r,u,f){var e=0,h=s[i]||s.linear,o=function(){e++;var i=e/t,s=h(i);n.call(f,s,i,e);r.call(f,s,i);e<t?f.animationFrame=k(o):u.apply(f)};k(o)},ii=n.getRelativePosition=function(n){var r,u,t=n.originalEvent||n,f=n.currentTarget||n.srcElement,i=f.getBoundingClientRect();return t.touches?(r=t.touches[0].clientX-i.left,u=t.touches[0].clientY-i.top):(r=t.clientX-i.left,u=t.clientY-i.top),{x:r,y:u}},et=n.addEvent=function(n,t,i){n.addEventListener?n.addEventListener(t,i):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i},ot=n.removeEvent=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=a},ri=n.bindEvents=function(n,t,r){n.events||(n.events={});i(t,function(t){n.events[t]=function(){r.apply(n,arguments)};et(n.chart.canvas,t,n.events[t])})},st=n.unbindEvents=function(n,t){i(t,function(t,i){ot(n.chart.canvas,i,t)})},ht=n.getMaximumWidth=function(n){var t=n.parentNode;return t.clientWidth},ct=n.getMaximumHeight=function(n){var t=n.parentNode;return t.clientHeight},ui=n.getMaximumSize=n.getMaximumWidth,lt=n.retinaScale=function(n){var t=n.ctx,i=n.canvas.width,r=n.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=i+"px",t.canvas.style.height=r+"px",t.canvas.height=r*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))},at=n.clear=function(n){n.ctx.clearRect(0,0,n.width,n.height)},e=n.fontString=function(n,t,i){return t+" "+n+"px "+i},y=n.longestText=function(n,t,r){n.font=t;var u=0;return i(r,function(t){var i=n.measureText(t).width;u=i>u?i:u}),u},d=n.drawRoundedRectangle=function(n,t,i,r,u,f){n.beginPath();n.moveTo(t+f,i);n.lineTo(t+r-f,i);n.quadraticCurveTo(t+r,i,t+r,i+f);n.lineTo(t+r,i+u-f);n.quadraticCurveTo(t+r,i+u,t+r-f,i+u);n.lineTo(t+f,i+u);n.quadraticCurveTo(t,i+u,t,i+u-f);n.lineTo(t,i+f);n.quadraticCurveTo(t,i,t+f,i);n.closePath()};t.instances={};t.Type=function(n,i,r){this.options=i;this.chart=r;this.id=it();t.instances[this.id]=this;i.responsive&&this.resize();this.initialize.call(this,n)};r(t.Type.prototype,{initialize:function(){return this},clear:function(){return at(this.chart),this},stop:function(){return n.cancelAnimFrame.call(h,this.animationFrame),this},resize:function(n){this.stop();var t=this.chart.canvas,i=ht(this.chart.canvas),r=this.options.maintainAspectRatio?i/this.chart.aspectRatio:ct(this.chart.canvas);return t.width=this.chart.width=i,t.height=this.chart.height=r,lt(this.chart),typeof n=="function"&&n.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:a,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return f(this.options.legendTemplate,this)},destroy:function(){this.clear();st(this,this.events);delete t.instances[this.id]},showTooltip:function(r,u){var h,l,e,s;if(typeof this.activeElements=="undefined"&&(this.activeElements=[]),h=function(n){var t=!1;return n.length!==this.activeElements.length?t=!0:(i(n,function(n,i){n!==this.activeElements[i]&&(t=!0)},this),t)}.call(this,r),h||u)this.activeElements=r;else return;if(this.draw(),r.length>0)if(this.datasets&&this.datasets.length>1){for(s=this.datasets.length-1;s>=0;s--)if(l=this.datasets[s].points||this.datasets[s].bars||this.datasets[s].segments,e=tt(l,r[0]),e!==-1)break;var a=[],v=[],y=function(){var f=[],t,i=[],r=[],s,h,u,l;return n.each(this.datasets,function(n){t=n.points||n.bars||n.segments;t[e]&&t[e].hasValue()&&f.push(t[e])}),n.each(f,function(t){i.push(t.x);r.push(t.y);a.push(n.template(this.options.multiTooltipTemplate,t));v.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),l=o(r),h=c(r),u=o(i),s=c(i),{x:u>this.chart.width/2?u:s,y:(l+h)/2}}.call(this,e);new t.MultiTooltip({x:y.x,y:y.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:a,legendColors:v,legendColorBackground:this.options.multiTooltipKeyBackground,title:r[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else i(r,function(n){var i=n.tooltipPosition();new t.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:f(this.options.tooltipTemplate,n),chart:this.chart}).draw()},this);return this},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});t.Type.extend=function(n){var i=this,u=function(){return i.apply(this,arguments)},f,e;return u.prototype=l(i.prototype),r(u.prototype,n),u.extend=t.Type.extend,n.name||i.prototype.name?(f=n.name||i.prototype.name,e=t.defaults[i.prototype.name]?l(t.defaults[i.prototype.name]):{},t.defaults[f]=r(e,n.defaults),t.types[f]=u,t.prototype[f]=function(n,i){var r=nt(t.defaults.global,t.defaults[f],i||{});return new u(n,r,this)}):rt("Name not provided for this chart, so it hasn't been registered"),i};t.Element=function(n){r(this,n);this.initialize.apply(this,arguments);this.save()};r(t.Element.prototype,{initialize:function(){},restore:function(n){return n?i(n,function(n){this[n]=this._saved[n]},this):r(this,this._saved),this},save:function(){return this._saved=l(this),delete this._saved._saved,this},update:function(n){return i(n,function(n,t){this._saved[t]=this[t];this[t]=n},this),this},transition:function(n,t){return i(n,function(n,i){this[i]=(n-this._saved[i])*t+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return u(this.value)}});t.Element.extend=p;t.Point=t.Element.extend({display:!0,inRange:function(n,t){var i=this.hitDetectionRadius+this.radius;return Math.pow(n-this.x,2)+Math.pow(t-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var n=this.ctx;n.beginPath();n.arc(this.x,this.y,this.radius,0,Math.PI*2);n.closePath();n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.fillStyle=this.fillColor;n.fill();n.stroke()}}});t.Arc=t.Element.extend({inRange:function(t,i){var r=n.getAngleFromPoint(this,{x:t,y:i}),u=r.angle>=this.startAngle&&r.angle<=this.endAngle,f=r.distance>=this.innerRadius&&r.distance<=this.outerRadius;return u&&f},tooltipPosition:function(){var n=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(n)*t,y:this.y+Math.sin(n)*t}},draw:function(n){var i=n||1,t=this.ctx;t.beginPath();t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);t.closePath();t.strokeStyle=this.strokeColor;t.lineWidth=this.strokeWidth;t.fillStyle=this.fillColor;t.fill();t.lineJoin="bevel";this.showStroke&&t.stroke()}});t.Rectangle=t.Element.extend({draw:function(){var n=this.ctx,f=this.width/2,t=this.x-f,i=this.x+f,r=this.base-(this.base-this.y),u=this.strokeWidth/2;this.showStroke&&(t+=u,i-=u,r+=u);n.beginPath();n.fillStyle=this.fillColor;n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.moveTo(t,this.base);n.lineTo(t,r);n.lineTo(i,r);n.lineTo(i,this.base);n.fill();this.showStroke&&n.stroke()},height:function(){return this.base-this.y},inRange:function(n,t){return n>=this.x-this.width/2&&n<=this.x+this.width/2&&t>=this.y&&t<=this.base}});t.Tooltip=t.Element.extend({draw:function(){var n=this.chart.ctx,r,u;n.font=e(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var t=2,i=n.measureText(this.text).width+2*this.xPadding,f=this.fontSize+2*this.yPadding,o=f+this.caretHeight+t;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right");this.y-o<0&&(this.yAlign="below");r=this.x-i/2;u=this.y-o;n.fillStyle=this.fillColor;switch(this.yAlign){case"above":n.beginPath();n.moveTo(this.x,this.y-t);n.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight));n.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight));n.closePath();n.fill();break;case"below":u=this.y+t+this.caretHeight;n.beginPath();n.moveTo(this.x,this.y+t);n.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight);n.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight);n.closePath();n.fill()}switch(this.xAlign){case"left":r=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}d(n,r,u,i,f,this.cornerRadius);n.fill();n.fillStyle=this.textColor;n.textAlign="center";n.textBaseline="middle";n.fillText(this.text,r+i/2,u+f/2)}});t.MultiTooltip=t.Element.extend({initialize:function(){var n;this.font=e(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=e(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+this.yPadding*2+this.titleFontSize*1.5;this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=y(this.ctx,this.font,this.labels)+this.fontSize+3,r=c([i,t]);this.width=r+this.xPadding*2;n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(n){var t=this.y-this.height/2+this.yPadding,i=n-1;return n===0?t+this.titleFontSize/2:t+(this.fontSize*1.5*i+this.fontSize/2)+this.titleFontSize*1.5},draw:function(){d(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor;t.fill();t.closePath();t.textAlign="left";t.textBaseline="middle";t.fillStyle=this.titleTextColor;t.font=this.titleFont;t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));t.font=this.font;n.each(this.labels,function(n,i){t.fillStyle=this.textColor;t.fillText(n,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1));t.fillStyle=this.legendColorBackground;t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize);t.fillStyle=this.legendColors[i].fill;t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}});t.Scale=t.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){var t,n;for(this.yLabels=[],t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(f(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?y(this.ctx,this.font,this.yLabels):0},addXLabel:function(n){this.xLabels.push(n);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-this.fontSize*1.5-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var n=this.endPoint-this.startPoint,t;for(this.calculateYRange(n),this.buildYLabels(),this.calculateXLabelRotation();n>this.endPoint-this.startPoint;)n=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(n),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){var n,r,u,e,t,i,f;if(this.ctx.font=this.font,n=this.ctx.measureText(this.xLabels[0]).width,r=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,this.xScalePaddingRight=r/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){for(t=y(this.ctx,this.font,this.xLabels),this.xLabelWidth=t,f=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>f&&this.xLabelRotation===0||this.xLabelWidth>f&&this.xLabelRotation<=90&&this.xLabelRotation>0;)i=Math.cos(v(this.xLabelRotation)),u=i*n,e=i*r,u+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=u+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=i*t;this.xLabelRotation>0&&(this.endPoint-=Math.sin(v(this.xLabelRotation))*t+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:a,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(n){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(n-this.min)},calculateX:function(n){var u=this.xLabelRotation>0,r=this.width-(this.xScalePaddingLeft+this.xScalePaddingRight),t=r/(this.valuesCount-(this.offsetGridLines?0:1)),i=t*n+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=t/2),Math.round(i)},update:function(t){n.extend(this,t);this.fit()},draw:function(){var t=this.ctx,u=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,i(this.yLabels,function(i,f){var o=this.endPoint-u*f,e=Math.round(o);t.textAlign="right";t.textBaseline="middle";this.showLabels&&t.fillText(i,r-10,o);t.beginPath();f>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor);e+=n.aliasPixel(t.lineWidth);t.moveTo(r,e);t.lineTo(this.width,e);t.stroke();t.closePath();t.lineWidth=this.lineWidth;t.strokeStyle=this.lineColor;t.beginPath();t.moveTo(r-5,e);t.lineTo(r,e);t.stroke();t.closePath()},this),i(this.xLabels,function(n,i){var f=this.calculateX(i)+b(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+b(this.lineWidth),u=this.xLabelRotation>0;t.beginPath();i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor);t.moveTo(r,this.endPoint);t.lineTo(r,this.startPoint-3);t.stroke();t.closePath();t.lineWidth=this.lineWidth;t.strokeStyle=this.lineColor;t.beginPath();t.moveTo(r,this.endPoint);t.lineTo(r,this.endPoint+5);t.stroke();t.closePath();t.save();t.translate(f,u?this.endPoint+12:this.endPoint+8);t.rotate(v(this.xLabelRotation)*-1);t.font=this.font;t.textAlign=u?"right":"center";t.textBaseline=u?"middle":"top";t.fillText(n,0,0);t.restore()},this))}});t.RadialScale=t.Element.extend({initialize:function(){this.size=o([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(n){var t=this.drawingArea/(this.max-this.min);return(n-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){var t,n;for(this.yLabels=[],t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(f(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}))},getCircumference:function(){return Math.PI*2/this.valuesCount},setScaleSize:function(){var y=o([this.height/2-this.pointLabelFontSize-5,this.width/2]),t,n,i,h,c=this.width,a,p,l=0,v,w,b,k,r,s;for(this.ctx.font=e(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),n=0;n<this.valuesCount;n++)t=this.getPointPosition(n,y),i=this.ctx.measureText(f(this.templateString,{value:this.labels[n]})).width+5,n===0||n===this.valuesCount/2?(h=i/2,t.x+h>c&&(c=t.x+h,a=n),t.x-h<l&&(l=t.x-h,v=n)):n<this.valuesCount/2?t.x+i>c&&(c=t.x+i,a=n):n>this.valuesCount/2&&t.x-i<l&&(l=t.x-i,v=n);b=l;k=Math.ceil(c-this.width);p=this.getIndexAngle(a);w=this.getIndexAngle(v);r=k/Math.sin(p+Math.PI/2);s=b/Math.sin(w+Math.PI/2);r=u(r)?r:0;s=u(s)?s:0;this.drawingArea=y-(s+r)/2;this.setCenterPoint(s,r)},setCenterPoint:function(n,t){var i=this.width-t-this.drawingArea,r=n+this.drawingArea;this.xCenter=(r+i)/2;this.yCenter=this.height/2},getIndexAngle:function(n){var t=Math.PI*2/this.valuesCount;return n*t-Math.PI/2},getPointPosition:function(n,t){var i=this.getIndexAngle(n);return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},draw:function(){var n,t,u,f;if(this.display&&(n=this.ctx,i(this.yLabels,function(t,i){var f,o,r,u,s;if(i>0){if(f=i*(this.drawingArea/this.steps),o=this.yCenter-f,this.lineWidth>0)if(n.strokeStyle=this.lineColor,n.lineWidth=this.lineWidth,this.lineArc)n.beginPath(),n.arc(this.xCenter,this.yCenter,f,0,Math.PI*2),n.closePath(),n.stroke();else{for(n.beginPath(),u=0;u<this.valuesCount;u++)r=this.getPointPosition(u,this.calculateCenterOffset(this.min+i*this.stepValue)),u===0?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y);n.closePath();n.stroke()}this.showLabels&&(n.font=e(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop&&(s=n.measureText(t).width,n.fillStyle=this.backdropColor,n.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+this.backdropPaddingX*2,this.fontSize+this.backdropPaddingY*2)),n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.fontColor,n.fillText(t,this.xCenter,o))}},this),!this.lineArc))for(n.lineWidth=this.angleLineWidth,n.strokeStyle=this.angleLineColor,t=this.valuesCount-1;t>=0;t--){this.angleLineWidth>0&&(u=this.getPointPosition(t,this.calculateCenterOffset(this.max)),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(u.x,u.y),n.stroke(),n.closePath());f=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);n.font=e(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);n.fillStyle=this.pointLabelFontColor;var s=this.labels.length,o=this.labels.length/2,r=o/2,h=t<r||t>s-r,c=t===r||t===s-r;n.textAlign=t===0?"center":t===o?"center":t<o?"left":"right";n.textBaseline=c?"middle":h?"bottom":"top";n.fillText(this.labels[t],f.x,f.y)}}});n.addEvent(window,"resize",function(){var n;return function(){clearTimeout(n);n=setTimeout(function(){i(t.instances,function(n){n.options.responsive&&n.resize(n.render,!0)})},50)}}());ut?define(function(){return t}):typeof module=="object"&&module.exports&&(module.exports=t);h.Chart=t;t.noConflict=function(){return h.Chart=g,t}}).call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){var r=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(n,t,i){var f=this.calculateBaseWidth(),e=this.calculateX(i)-f/2,u=this.calculateBarWidth(n);return e+u*t+t*r.barDatasetSpacing+u/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(n){var t=this.calculateBaseWidth()-(n-1)*r.barDatasetSpacing;return t/n}});this.datasets=[];this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getBarsAtEvent(t):[];this.eachBars(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(r);n.each(t.data,function(n,u){r.bars.push(new this.BarClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this);this.buildScale(i.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(t,i,r){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,i),y:this.scale.endPoint});t.save()},this);this.render()},update:function(){this.scale.update();n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])});this.eachBars(function(n){n.save()});this.render()},eachBars:function(t){n.each(this.datasets,function(i,r){n.each(i.bars,t,this,r)},this)},getBarsAtEvent:function(t){for(var u=[],f=n.getRelativePosition(t),e=function(n){u.push(n.bars[i])},i,r=0;r<this.datasets.length;r++)for(i=0;i<this.datasets[r].bars.length;i++)if(this.datasets[r].bars[i].inRange(f.x,f.y))return n.each(this.datasets,e),u;return u},buildScale:function(t){var r=this,u=function(){var n=[];return r.eachBars(function(t){n.push(t.value)}),n},i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(u(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(i,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(i)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].bars.push(new this.BarClass({value:n,label:i,x:this.scale.calculateBarX(this.datasets.length,t,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[t].strokeColor,fillColor:this.datasets[t].fillColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();n.each(this.datasets,function(n){n.bars.shift()},this);this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1,r;this.clear();r=this.chart.ctx;this.scale.draw(i);n.each(this.datasets,function(t,r){n.each(t.bars,function(n,t){n.hasValue()&&(n.base=this.scale.endPoint,n.transition({x:this.scale.calculateBarX(this.datasets.length,r,t),y:this.scale.calculateY(n.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var r=this,t=r.Chart,n=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(i){this.segments=[];this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])});n.each(i,function(n){n.fillColor=n.highlightColor});this.showTooltip(i)});this.calculateTotal(i);n.each(i,function(n,t){this.addData(n,t,!0)},this);this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({value:n.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:n.color,highlightColor:n.highlight||n.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:Math.PI*1.5,circumference:this.options.animateRotate?0:this.calculateCircumference(n.value),label:n.label}));i||(this.reflow(),this.update())},calculateCircumference:function(n){return Math.PI*2*(n/this.total)},calculateTotal:function(t){this.total=0;n.each(t,function(n){this.total+=n.value},this)},update:function(){this.calculateTotal(this.segments);n.each(this.activeElements,function(n){n.restore(["fillColor"])});n.each(this.segments,function(n){n.save()});this.render()},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1);this.reflow();this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;n.each(this.segments,function(n){n.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear();n.each(this.segments,function(n,t){n.transition({circumference:this.calculateCircumference(n.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i);n.endAngle=n.startAngle+n.circumference;n.draw();t===0&&(n.startAngle=Math.PI*1.5);t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle)},this)}});t.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(n){return Math.pow(n-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r);n.each(t.data,function(n,u){r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this);this.buildScale(i.labels);this.eachPoints(function(t,i){n.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint});t.save()},this)},this);this.render()},update:function(){this.scale.update();n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])});this.eachPoints(function(n){n.save()});this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(n){n.inRange(r.x,r.y)&&i.push(n)})},this),i},buildScale:function(i){var u=this,f=function(){var n=[];return u.eachPoints(function(t){n.push(t.value)}),n},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:i.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(f(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:i,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new t.Scale(r)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();n.each(this.datasets,function(n){n.points.shift()},this);this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var u=t||1;this.clear();var i=this.chart.ctx,r=function(n){return n.value!==null},e=function(t,i,u){return n.findNextWhere(i,r,u)||t},f=function(t,i,u){return n.findPreviousWhere(i,r,u)||t};this.scale.draw(u);n.each(this.datasets,function(t){var o=n.where(t.points,r);n.each(t.points,function(n,t){n.hasValue()&&n.transition({y:this.scale.calculateY(n.value),x:this.scale.calculateX(t)},u)},this);this.options.bezierCurve&&n.each(o,function(t,i){var r=i>0&&i<o.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(f(t,o,i),t,e(t,o,i),r);t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint);t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this);i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor;i.beginPath();n.each(o,function(n,t){if(t===0)i.moveTo(n.x,n.y);else if(this.options.bezierCurve){var r=f(n,o,t);i.bezierCurveTo(r.controlPoints.outer.x,r.controlPoints.outer.y,n.controlPoints.inner.x,n.controlPoints.inner.y,n.x,n.y)}else i.lineTo(n.x,n.y)},this);i.stroke();this.options.datasetFill&&o.length>0&&(i.lineTo(o[o.length-1].x,this.scale.endPoint),i.lineTo(o[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill());n.each(o,function(n){n.draw()})},this)}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.segments=[];this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:i.length});this.updateScaleRange(i);this.scale.update();n.each(i,function(n,t){this.addData(n,t,!0)},this);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])});n.each(i,function(n){n.fillColor=n.highlightColor});this.showTooltip(i)});this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:n.color,highlightColor:n.highlight||n.color,label:n.label,value:n.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(n.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:Math.PI*1.5}));i||(this.reflow(),this.update())},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1);this.reflow();this.update()},calculateTotal:function(t){this.total=0;n.each(t,function(n){this.total+=n.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[],r;n.each(t,function(n){i.push(n.value)});r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);n.each(this.segments,function(n){n.save()});this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);this.scale.update();n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});n.each(this.segments,function(n){n.update({outerRadius:this.scale.calculateCenterOffset(n.value)})},this)},draw:function(t){var i=t||1;this.clear();n.each(this.segments,function(n,t){n.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(n.value)},i);n.endAngle=n.startAngle+n.circumference;t===0&&(n.startAngle=Math.PI*1.5);t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle);n.draw()},this);this.scale.draw()}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(i);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r);n.each(t.data,function(n,u){var f;this.scale.animation||(f=this.scale.getPointPosition(u,this.scale.calculateCenterOffset(n)));r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:f.x,y:this.options.animation?this.scale.yCenter:f.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var f=n.getRelativePosition(t),r=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},f),e=Math.PI*2/this.scale.valuesCount,i=Math.round((r.angle-Math.PI*1.5)/e),u=[];return(i>=this.scale.valuesCount||i<0)&&(i=0),r.distance<=this.scale.drawingArea&&n.each(this.datasets,function(n){u.push(n.points[i])}),u},buildScale:function(n){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:n.labels,valuesCount:n.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(n.datasets);this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return n.each(t,function(t){t.data?i=i.concat(t.data):n.each(t.points,function(n){i.push(n.value)})}),i}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r)},addData:function(t,i){this.scale.valuesCount++;n.each(t,function(n,t){var r=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(n));this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:r.x,y:r.y,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this);this.scale.labels.push(i);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();n.each(this.datasets,function(n){n.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(n){n.save()});this.reflow();this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(t){var r=t||1,i=this.chart.ctx;this.clear();this.scale.draw();n.each(this.datasets,function(t){n.each(t.points,function(n,t){n.hasValue()&&n.transition(this.scale.getPointPosition(t,this.scale.calculateCenterOffset(n.value)),r)},this);i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor;i.beginPath();n.each(t.points,function(n,t){t===0?i.moveTo(n.x,n.y):i.lineTo(n.x,n.y)},this);i.closePath();i.stroke();i.fillStyle=t.fillColor;i.fill();n.each(t.points,function(n){n.hasValue()&&n.draw()})},this)}})}.call(this);var FILTER_colors=["#FFFFB0","#B0B0FF","#68C473","#C468B9","#6669BA","#BAB766"],FILTER_modalIndex=-1,FILTER_VERSION="1.1.1.0";SORTING_VERSION="1.1.1.0";SORTING_modalIndex=-1;
/*! JTable v1.3.1.0         */
/*! Created By: D.J. Enzyme */
/*! Creation Date: 20141229 */
/*! Modified Date: 20150331 */
JTables={};JTables.Version=new Version(1,3,1,0);JTables.tableIndex=-1;Chart.defaults.global.responsive=!0;graphColors=[{color:"#8B2323",highlight:"#D04545"},{color:"#00688B",highlight:"#00BEFE"},{color:"#006400",highlight:"#008000"},{color:"#FBEC5D",highlight:"#FCF18B"},{color:"#2E0854",highlight:"#6F13CB"}];String.prototype.root||(String.prototype.root=function(n){"use strict";var t=this.indexOf(n);return t===-1?this:this.substring(0,t)});Math.roundAdv||(Math.roundAdv=function(n,t){"use strict";return isNaN(n)?0:+(Math.round(n+"e+"+t)+"e-"+t)});var JTestString=["==",">",">=","<","<=","!=","^=","!^=","$=","!$=","*=","!*=","=rgx=","!=rgx=","in","notIn"],JLinkString=["none","and","or"],FORMREPORT_VERSION=null;$(document).on("ready",function(){FORMREPORT_VERSION="1.4.0.0";var n=new JTable;n.AfterLoad=function(t){BREADCRUMB.CURRENT!==null?UpdateBreadCrumb(t):setTimeout(function(){UpdateBreadCrumb(t)},5e3);CheckForUpdates(n)};n.Load(window.location.origin+"/SystemAdministration/Logs",TABLE_options);$("#downloadReport").on("click",function(){var r={id:n.Id,average:$("#averages").prop("checked"),filters:n.Filters,sortings:n.Sortings,graph:$("#graphs").prop("checked")},i=$.extend({},n),t=new XMLHttpRequest;t.open("post","../Create/Report");RESTFUL.jsonHeader(t);RESTFUL.ajaxHeader(t);t.onerror=function(){RESTFUL.showError("There was an error creating the report. 500 Internal server error.","Report Creation Error");prettyProccessing.hidePleaseWait()};t.onload=function(n){var i=n.currentTarget,t;i.status===200?(t=RESTFUL.parse(i),t.Success?(prettyProcessing.hidePleaseWait(),window.location=window.location.origin+"/Cloud/Download/Report/"+t.Id):(RESTFUL.showError("There was an error creating the report.","Report Creation Error"),prettyProccessing.hidePleaseWait())):(RESTFUL.showError("There was an error creating the report.","Report Creation Error"),prettyProccessing.hidePleaseWait())};prettyProcessing.showPleaseWait("Creating Form Report","Creating Report");i.FilteredRows=[];i.Rows=[];i.FilterObject=null;i.SortingObject=null;t.send(JSON.stringify(AddJsonAntiForgeryToken(i)))});$("#printable").on("click",function(t){t.preventDefault();n.GetPrintView()})});
//# sourceMappingURL=b_logs.min.js.map
